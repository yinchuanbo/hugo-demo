---
title: "js å°†åˆ—è¡¨ç»„è£…æˆæ ‘ç»“æ„çš„ä¸¤ç§æ–¹å¼"
date: 2022-12-14T20:54:18+08:00
---

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cc716b53949c4ac59f19c39faf7c4531~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

### èƒŒæ™¯ä»‹ç»

å¯ç»„è£…æˆæ ‘ç»“æ„çš„æ•°ç»„ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ä¸ªè¦ç´ ï¼š

- `id` å½“å‰èŠ‚ç‚¹ id
- `parentId` å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ id
- `children` å­èŠ‚ç‚¹åˆ—è¡¨ï¼ˆå¯èƒ½ä¸ä¼šåœ¨æ¥å£ä¸­è¿”å›ï¼Œéœ€è¦ç»„è£…æ—¶å€™è‡ªå·±åŠ ä¸Šï¼‰

åŸå§‹ç»“æ„ï¼š ![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ead360e6cd847a99e9815e688fe93c6~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

ç›®æ ‡ç»“æ„ï¼š

![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/019c24d8317e447eab0620549f0ba586~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

å…³é”®å°±æ˜¯ä¸€ç»´æ•°ç»„ä¸­é€šè¿‡ parentId æ‰¾åˆ°å…¶å¯¹åº”çš„çˆ¶èŠ‚ç‚¹å¹¶æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹çš„ children æ•°ç»„ä¸­ã€‚

### å®ç°æ–¹æ¡ˆ

æœ€ç›´æ¥çš„æ–¹å¼å°±æ˜¯éå†æ•°ç»„ï¼Œå¹¶æŠŠæ‰¾åˆ°çš„å­èŠ‚ç‚¹é€ä¸€æ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹ä¸­

```js
function listToTreeSimple(data) {
  const res = [];
  data.forEach((item) => {
    const parent = data.find((node) => node.id === item.parentId);
    if (parent) {
      parent.children = parent.children || [];
      parent.children.push(item);
    } else {
      // * æ ¹èŠ‚ç‚¹
      res.push(item);
    }
  });
  return res;
}
```

è€ƒè™‘è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œä»¥ id ä¸º key å­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹å€¼ï¼Œçœå» data.find è®¡ç®—

```js
function listToTree(data) {
  // * å…ˆç”Ÿæˆparentå»ºç«‹çˆ¶å­å…³ç³»
  const obj = {};
  data.forEach((item) => {
    obj[item.id] = item;
  });
  // * obj -> {1001: {id: 1001, parentId: 0, name: 'AA'}, 1002: {...}}
  // console.log(obj, "obj")
  const parentList = [];
  data.forEach((item) => {
    const parent = obj[item.parentId];
    if (parent) {
      // * å½“å‰é¡¹æœ‰çˆ¶èŠ‚ç‚¹
      parent.children = parent.children || [];
      parent.children.push(item);
    } else {
      // * å½“å‰é¡¹æ²¡æœ‰çˆ¶èŠ‚ç‚¹ -> é¡¶å±‚
      parentList.push(item);
    }
  });
  return parentList;
}
```

å³ä¾¿æ•°æ®é‡å¾ˆå°ï¼Œå¸¦æ¥çš„æ€§èƒ½æå‡ä¹Ÿæ˜¯æ˜¾è‘—çš„

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4dbef7ff3d57486c9ee57b5b50252a49~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

### é€’å½’æ³•

æ›´æœ‰éªšæ“ä½œé€’å½’æ³•ï¼Œæ€§èƒ½ä¼šå¾ˆå·®ï¼Œä½†ä»£ç ä¼šå¾ˆé…· ğŸ˜

```js
function recursiveToTree(data) {
  function loop(key) {
    const arr = [];
    data.forEach((item) => {
      if (item.parentId === key) {
        item.children = loop(item.id);
        arr.push(item);
      }
    });
    return res;
  }
  return loop(1);
}
```

çœ‹çœ‹æ€§èƒ½ï¼Œè¯¶ï¼Ÿçœ‹èµ·æ¥ç«Ÿç„¶é€’å½’æ€§èƒ½æœ€ä½³ ğŸ¤”

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c649dfdc5b994886beb7bc471e49eb93~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

ä½†æ˜¯æ•°æ®é‡ç¨å¾®å¤§ä¸€ç‚¹â€¦â€¦

![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5e9a25b56d534b1181570e8316bbe742~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

(ä¸Šé¢é€’å½’ï¼Œä¸‹é¢éé€’å½’)

### èµ„æº

åŸå§‹æ•°æ®åˆ—è¡¨

```js
const list = [
  {
    id: 1001,
    parentId: 0,
    name: "AA",
  },
  {
    id: 1002,
    parentId: 1001,
    name: "BB",
  },
  {
    id: 1003,
    parentId: 1001,
    name: "CC",
  },
  {
    id: 1004,
    parentId: 1003,
    name: "DD",
  },
  {
    id: 1005,
    parentId: 1003,
    name: "EE",
  },
  {
    id: 1006,
    parentId: 1002,
    name: "FF",
  },
  {
    id: 1007,
    parentId: 1002,
    name: "GG",
  },
  {
    id: 1008,
    parentId: 1004,
    name: "HH",
  },
  {
    id: 1009,
    parentId: 1005,
    name: "II",
  },
];
```
