---
title: "lodash"
date: 2022-10-16T10:11:33+08:00
---

## 0. å¼•è¨€

Lodash æ˜¯ JavaScript ç¤¾åŒºæœ€å‡ºåçš„ä¸€ä¸ªå·¥å…·åº“ï¼Œæä¾›äº†è®¸å¤šé«˜æ•ˆã€é«˜å…¼å®¹æ€§çš„å·¥å…·å‡½æ•°ã€‚

ä¸è¿‡ï¼Œéšç€æµè§ˆå™¨å’Œ web æŠ€æœ¯çš„å‘å±•ï¼Œä¸€äº›äººå¼€å§‹åå¯¹åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ lodashã€‚ä¸»è¦åŸå› æœ‰ï¼š

- ES6 ä¹‹åæ‹“å±•äº† JavaScript ç‰¹æ€§ï¼Œè®¸å¤šåŠŸèƒ½ä¸å†éœ€è¦é¢å¤–å·¥å…·åº“ã€‚
- ç°ä»£æµè§ˆå™¨å¯¹ ES è¯­æ³•çš„æ”¯æŒæ€§æå‡ã€‚
- Babel ç­‰ç¼–è¯‘å·¥å…·èƒ½å°† ES6 ç¼–è¯‘æˆ ES5ï¼Œæ›´ä¼˜é›…åœ°è§£å†³äº† ES6 è¯­æ³•çš„å…¼å®¹æ€§é—®é¢˜ã€‚
- ä¸ºäº†å‡ ä¸ªå·¥å…·å‡½æ•°è€Œå¼•å…¥äº†æ•´ä¸ª lodashï¼Œå¢åŠ äº†é¡¹ç›®çš„ä½“ç§¯ã€‚

æœ¬æ–‡æ¥æ¢è®¨ä¸€ä¸‹ï¼Œæˆ‘ä»¬è¯¥ä¸è¯¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ lodashï¼Œä»¥åŠå¦‚ä½•æ­£ç¡®ä½¿ç”¨ lodashã€‚æ˜¯çš„ï¼Œè¿™ä¸ªçœ‹èµ·æ¥æœ‰ç‚¹æ ‡é¢˜å…šçš„æ ‡é¢˜ï¼Œæœ‰ä¸¤å±‚å«ä¹‰ï¼š

- ä½ ä¼šåœ¨é¡¹ç›®ä¸­ä½¿ç”¨ lodash å—ï¼Ÿ
- ä½ ä¼šæ­£ç¡®åœ°ä½¿ç”¨ lodash å—ï¼Ÿ

## 1. æˆ‘ä»¬è¿˜éœ€è¦ lodash å—ï¼Ÿ

ä¸ªäººè®¤ä¸ºï¼Œ**åº”è¯¥ä¼˜å…ˆä½¿ç”¨ ES åŸç”Ÿè¯­æ³•ï¼ŒåŒæ—¶ï¼Œåœ¨å¤§éƒ¨åˆ†é¡¹ç›®ä¸­ä»ç„¶æ¨èä½¿ç”¨ lodash ä½œä¸ºæ‹“å±•å·¥å…·åº“**ã€‚åŸå› å¦‚ä¸‹ï¼š

- Lodash ä¸æ­¢ ES6ï¼Œæœ‰æ›´å¤š ES6 éš¾ä»¥å®ç°çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å¸¸è§çš„æ·±æ‹·è´ã€‚
- æé«˜å¼€å‘æ•ˆç‡ã€ç®€åŒ–ä»£ç ã€‚lodash ä¸­çš„å‡½æ•°ï¼Œéƒ½æ˜¯ç¤¾åŒºå¼€å‘è€…ä»å¤šå¹´çš„å®è·µä¸­æç‚¼å‡ºæ¥çš„å¸¸ç”¨åŠŸèƒ½ï¼Œå¹¶ä¸”ç»è¿‡å¹¿æ³›çš„è€ƒéªŒå’Œä¼˜åŒ–ï¼Œä½¿ç”¨åº“å‡½æ•°å¾€å¾€æ¯”è‡ªå·±å®ç°æœ‰æ›´å¥½çš„æ€§èƒ½å’Œé²æ£’æ€§ã€‚
- Lodash æ”¯æŒå¤šç§æ¨¡å—åŒ–æ–¹æ¡ˆï¼Œé…åˆ tree shaking æŠ€æœ¯æˆ–è€…ä½¿ç”¨å•ç‹¬çš„å‡½æ•°æ¨¡å—ï¼Œå‡ ä¹ä¸ä¼šå¯¼è‡´å†—ä½™ä»£ç ã€‚

ä¸ç®¡æ€ä¹ˆæ ·ï¼Œlodash ç›®å‰ä»ç„¶ä¿æŒç€ 4 åƒå¤šä¸‡çš„å‘¨ä¸‹è½½äº†ï¼Œå°±è¶³ä»¥è§å¾—å®ƒçš„æµè¡Œç¨‹åº¦ã€‚

## 2. è¿˜æ˜¯ä¸æƒ³ç”¨ lodash ï¼Ÿ

å³ä½¿ä½ åšæŒä¸è‚¯ä½¿ç”¨ lodashï¼Œæˆ‘è®¤ä¸ºä»ç„¶æœ‰å¿…è¦äº†è§£ lodash æä¾›äº†å“ªäº›åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä½ ä¼šç»å¸¸åœ¨å¼€å‘ä¸­é‡åˆ°ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ å¯ä»¥ä» [You Don't Need Lodash Underscore](https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore) ä¸­æŸ¥çœ‹å¦‚ä½•ä½¿ç”¨åŸç”Ÿè¯­æ³•å®ç°ã€‚

## 3. Lodash æŒ‰éœ€å¼•å…¥

æœ€å¸¸è§çš„å¼•å…¥ lodash çš„æ–¹å¼æ˜¯ï¼š

```js
// æ–¹å¼1ï¼šå¼•å…¥æ•´ä¸ªlodashå¯¹è±¡
import _ from "lodash";

// æ–¹å¼2ï¼šæŒ‰åç§°å¼•å…¥ç‰¹å®šçš„å‡½æ•°
import { cloneDeep } from "lodash";
```

è¿™ä¸¤ç§æ–¹å¼éƒ½ä¼šå¼•å…¥æ•´ä¸ª lodash åº“ã€‚Lodash å«æœ‰è®¸å¤šå‡½æ•°ï¼Œé¡¹ç›®é‡Œä¸€èˆ¬åªä¼šç”¨åˆ°å…¶ä¸­çš„å°éƒ¨åˆ†ï¼Œä¸ºäº†é¿å…å¼•å…¥ä¸å¿…è¦çš„ä»£ç ï¼Œlodash æä¾›äº†å¤šç§æ”¯æŒæŒ‰éœ€åŠ è½½çš„æ–¹å¼ã€‚

### Aï¼‰ä½¿ç”¨æ‰“åŒ…æ’ä»¶å®ç°æŒ‰éœ€åŠ è½½ï¼ˆæ¨èï¼‰

æ’ä»¶ [babel-plugin-lodash](https://www.npmjs.com/package/babel-plugin-lodash) å’Œ [lodash-webpack-plugin](https://www.npmjs.com/package/lodash-webpack-plugin) èƒ½å¤Ÿåœ¨æ‰“åŒ…æ—¶å»æ‰ä¸å¿…è¦çš„ lodash ä»£ç ï¼Œå‡å°äº§ç‰©ä½“ç§¯ã€‚

### Bï¼‰æŒ‡ç”¨å…·ä½“çš„åŠŸèƒ½æ¨¡å—

```js
// åªå¼•å…¥ array æ¨¡å—çš„åŠŸèƒ½
import array from "lodash/array";

// åªå¼•å…¥ cloneDeep å‡½æ•°
import cloneDeep from "lodash/cloneDeep";
```

è¿™ç§æ–¹å¼åªä¼šå¼•å…¥å¼•ç”¨è·¯å¾„å¯¹åº”çš„æ¨¡å—ï¼Œæ— éœ€ä½¿ç”¨æ’ä»¶ï¼Œä¹Ÿä¸ä¼šæœ‰å†—ä½™ä»£ç ã€‚ç¼ºç‚¹æ˜¯æ¯ä¸ª `import` è¯­å¥åªèƒ½å¼•å…¥ä¸€ä¸ªå‡½æ•°ï¼Œå¯èƒ½å¯¼è‡´å¤šä¸ª `import` è¯­å¥ã€‚

### Cï¼‰ä½¿ç”¨å•ç‹¬çš„å‡½æ•°åº“

Lodash ä¸ºæ¯ä¸ªæ–¹æ³•æä¾›äº†[å•ç‹¬çš„ npm åŒ…](https://www.npmjs.com/search?q=keywords:lodash-modularized)ï¼Œä½ å¯ä»¥åªä¸‹è½½ä½ æƒ³è¦çš„å‡½æ•°ã€‚

> ğŸ’¡ ä¸æ¨èåœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚é¦–å…ˆï¼Œå®ƒå¹¶ä¸åƒçœ‹èµ·æ¥ä¸€æ ·è½»é‡ï¼Œlodash ä¸­çš„å…¬å…±ä»£ç ä¼šå­˜åœ¨äºæ¯ä¸€ä¸ªå‡½æ•°åŒ…ä¸­ã€‚å…¶æ¬¡ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½æ˜¯ç‹¬ç«‹çš„ä¾èµ–åŒ…ï¼Œæ„å‘³ç€å¤šæ¬¡å®‰è£…ã€å¤šä¸ª `package.json` ä¾èµ–é¡¹ã€å¤šä¸ª node_modules åŒ…ç›®å½•ã€‚

## 4. å®ç”¨åŠŸèƒ½æ€»ç»“

Lodash å«æœ‰ Array, Collection, Date, Function, Lang, Math, Number, Object, String ç­‰å¤šä¸ªåŠŸèƒ½æ¨¡å—ï¼Œæ€»å…±å‡ ç™¾ä¸ªåŠŸèƒ½å‡½æ•°ã€‚å®˜æ–¹æ–‡æ¡£ä¸Šä»¥å­—å…¸é¡ºåºæ’åºï¼Œä¸å®¹æ˜“æ€»ç»“è®°å¿†ã€‚è¿™é‡Œæ€»ç»“ä¸€äº› ES6 ä¸å®¹æ˜“å®ç°çš„å®ç”¨åŠŸèƒ½ã€‚

### 4.1. å­—ç¬¦ä¸²æ“ä½œ

#### 4.1.1. å¤§å°å†™è½¬æ¢

`String.toLowerCase/toUpperCase` åªèƒ½è¿›è¡Œç®€å•å¤§å°å†™è½¬æ¢ï¼Œlodash è¿˜æä¾›äº†

```js
_.lowerFirst(string);
_.upperFirst(string);
// ç¬¬ä¸€ä¸ªå­—ç¬¦å¤§å†™ï¼Œå…¶å®ƒå­—ç¬¦å°å†™
_.capitalize(string);
```

#### 4.1.2. å‘½åé£æ ¼è½¬æ¢

ç¼–ç¨‹ä¸­ï¼Œå¸¸è§çš„å¤šå•è¯å‘½åé£æ ¼æœ‰ï¼š

- è›‡å½¢å†™æ³•ï¼ˆsnake caseï¼‰:å•è¯ä¹‹é—´ç”¨ä¸‹åˆ’çº¿è¿æ¥ï¼Œå¦‚ `foo_bar`ã€‚
- çƒ¤è‚‰ä¸²å†™æ³•ï¼ˆkebab caseï¼‰:å•è¯ä¹‹é—´ä½¿ç”¨æ¨ªçº¿è¿æ¥,å¦‚ `foo-bar`ã€‚
- é©¼å³°å†™æ³•ï¼ˆcamel caseï¼‰:ä»äºŒä¸ªå•è¯å¼€å§‹ï¼Œæ¯ä¸ªå•è¯çš„é¦–å­—æ¯å¤§å†™,å¦‚ `fooBar` ã€‚
- å¤§é©¼å³°å†™æ³•ï¼ˆpascal caseï¼‰:æ¯ä¸ªå•è¯é¦–å­—æ¯å¤§å†™ï¼Œå¦‚ `FooBar`ã€‚

[é™¤äº†å¤§é©¼å³°](https://github.com/lodash/lodash/pull/942)ï¼Œå…¶ä»–ä¸‰ç§é£æ ¼éƒ½æœ‰å¯¹åº”çš„è½¬æ¢å‡½æ•°ï¼š

```js
_.snakeCase(string);
_.kebabCase(string);
_.camelCase(string);
// åˆ©ç”¨upperFirstå’ŒcamelCase å®ç° pascalCase
const pascalCase = (string) => _.upperFirst(_.camelCase(string));

// examples
_.snakeCase("fooBar"); // 'foo_bar'
_.camelCase("Foo Bar"); // 'fooBar'
_.kebabCase("__FOO_BAR__"); // 'foo-bar'
```

å¦å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªä¸å¸¸ç”¨çš„å…¨å¤§å†™å’Œå…¨å°å†™å†™æ³•ï¼ˆä»¥ç©ºæ ¼ä¸ºåˆ†éš”ç¬¦ï¼‰ï¼Œå®ƒä»¬ä¸ `_.toLower/toUpper` çš„åŒºåˆ«æ˜¯ä¼šè¯†åˆ«å¹¶è½¬æ¢å­—ç¬¦ä¸²ä¸­çš„åˆ†éš”ç¬¦ã€‚

```js
_.lowerCase(string);
_.upperCase(string);

// examples
_.lowerCase("--Foo-Bar--"); // 'foo bar'
_.upperCase("fooBar"); // 'FOO BAR'
```

### 4.2. ç®—æœ¯ä¸æ•°å­—

ç®—æœ¯è¿ç®—ï¼š

```js
// æ±‚æ€»å’Œ
_.sum(array);
// æ±‚å¹³å‡å€¼
_.mean(array);
```

å¸¸ç”¨çš„æ•°å­—æ“ä½œï¼š

```js
// è¿”å›ä¸€ä¸ª[lower,upper]ä¹‹é—´çš„éšæœºæ•°
// å¦‚æœlowerå’Œupperä¸­æœ‰æµ®ç‚¹æ•°ï¼Œæˆ–è€…floatingä¸ºtrueï¼Œè¿”å›æµ®ç‚¹æ•°ï¼Œå¦åˆ™ï¼Œè¿”å›æ•´æ•°
_.random(lower=0,upper=1 [,floating])

// ç”Ÿæˆä¸€ä¸ªèŒƒå›´æ•°ç»„
_.range([start=0,]end,step=1)

// æŠŠä¸€ä¸ªæ•°å­—å°±è¿‘é™åˆ¶åœ¨æŸä¸ªåŒºé—´å†…
_.clamp(number,[lower=0,] upper)
// examples
_.clamp(-10, -5, 5);    // -5
_.clamp(10, -5, 5);    // 5
```

### 4.3. æ•°ç»„æ“ä½œ

#### 4.3.1. é›†åˆè¿ç®—

```js
// äº¤é›† intersection
_.intersection(...arrays);
_.intersectionWith(...arrays [, comparator]);
_.intersectionBy(...arrays [, iteratee]);

// å¹¶é›†
_.union(...arrays);
_.unionWith(...arrays [, comparator]);
_.unionBy(...arrays [, iteratee]);

// é›†åˆå·®ï¼ŒA - B è¡¨ç¤ºå±äºé›†åˆAä½†ä¸å±äºé›†åˆBçš„å…ƒç´ é›†åˆ
_.difference(array, ...operands);
_.differenceWith(array, ...operands [, comparator]);
_.differenceBy(array, ...operands [, iteratee]);
```

è¿™ä¸‰ç°‡å‡½æ•°éƒ½ä¸æ”¹å˜åŸæ¥çš„æ•°ç»„ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„ä½œä¸ºè¿ç®—ç»“æœã€‚å…¶ä¸­ï¼Œäº¤å¹¶é›†çš„è¿ç®—ç»“æœä¸å«é‡å¤å…ƒç´ ï¼Œé›†åˆå·®å–å†³äºç¬¬ä¸€ä¸ªé›†åˆã€‚

å‡½æ•°å‘½åå…·æœ‰ä¸€å®šçš„è§„çº¦ï¼Œä»¥äº¤é›†ä¸ºä¾‹ï¼š

- `intersection`: æ‰§è¡Œå¸¸è§„è¿ç®—ï¼Œé‡‡ç”¨æµ…æ¯”è¾ƒåˆ¤æ–­å…ƒç´ æ˜¯å¦ç›¸ç­‰ã€‚
- `intersectionWidth`: è°ƒç”¨ `comparator` å‡½æ•°è¿›è¡Œå…ƒç´ æ¯”è¾ƒï¼Œå¯ä»¥è‡ªå®šä¹‰æ¯”è¾ƒæ–¹å¼ã€‚
- `intersectionBy`: æ¯ä¸ªå…ƒç´ å…ˆç»è¿‡ `iteratee` å‡½æ•°å¤„ç†ï¼Œå¯¹è½¬æ¢åçš„æ•°ç»„è¿›è¡Œæ¯”è¾ƒè¿ç®—ï¼Œæœ€åä»¥è½¬æ¢å‰çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºç»“æœã€‚

```js
_.intersection([2, 1, 1], [2, 3], [2, 4]);
//Â =>Â [2]

const objects = [
  { x: 1, y: 2 },
  { x: 2, y: 1 },
];
const others = [
  { x: 1, y: 1 },
  { x: 1, y: 2 },
];
_.intersectionWith(objects, others, _.isEqual);
//Â =>Â [{Â 'x':Â 1,Â 'y':Â 2Â }]  , ç»“æœå¼•ç”¨objectsä¸­çš„å…ƒç´ 

_.intersectionBy([2.1, 1.2], [2.3, 3.4], [3.2, 2.4], Math.floor);
//Â =>Â [2.1]
```

#### 4.3.2. åˆ†ç‰‡/åˆ†åŒº/åˆ†ç»„

åˆ†ç‰‡ï¼ˆchunkï¼‰æ˜¯æŒ‡æŠŠæ•°ç»„ä¸­çš„æ¯ n ä¸ªå…ƒç´ åˆ†ä¸ºä¸€ç»„ï¼ˆä¸€ç‰‡ï¼‰ï¼Œå¦‚æœä¸èƒ½æ•´é™¤ï¼Œæœ€åå‰©ä¸‹çš„å…ƒç´ å•ç‹¬ä¸€ç‰‡ã€‚

```js
_.chunk(array [, size=1])

// example
_.chunk(['a',Â 'b',Â 'c',Â 'd','e'],Â 2);
// => [["a", "b"], ["c", "d"], ["e"]]
```

åˆ†åŒºï¼ˆpartitionï¼‰æ˜¯åˆ©ç”¨ä¸€ä¸ªæ–­è¨€å‡½æ•°è¿­ä»£æ¯ä¸ªå…ƒç´ ï¼Œæ ¹æ®æ–­è¨€çš„ true å’Œ falseï¼ŒæŠŠå…ƒç´ åˆ†æˆä¸¤ç»„ã€‚

```js
_.partition(collection [, predicate])

// example
_.partition([4,5,6,7],num=>num>5)
// =>[[6, 7], [4, 5]]
```

åˆ†ç»„(group) åˆ™æ˜¯ç”¨ä¸€ä¸ªå‡½æ•°éå†æ¯ä¸ªå…ƒç´ ï¼Œå¾—åˆ°çš„ç»“æœä½œä¸ºè¯¥å…ƒç´ æ‰€åœ¨ç»„çš„ keyï¼Œç›¸åŒ key å…ƒç´ å½’ä¸ºåŒä¸€ç»„ã€‚

```js
_.groupBy(collection [, iteratee])

// example
_.groupBy([6.1, 4.2, 6.3], Math.floor);
// => { '4': [4.2], '6': [6.1, 6.3] }
```

#### 4.3.3. æœ‰åºæ•°ç»„æŸ¥æ‰¾/å»é‡

åœ¨ä¿è¯æ•°ç»„æœ‰åºçš„æƒ…å†µä¸‹ï¼ŒæŸ¥æ‰¾å’Œå»é‡å¯ä»¥é‡‡ç”¨äºŒåˆ†æ³•ï¼Œé™ä½å¤æ‚åº¦ã€‚Lodash ä¹Ÿæä¾›äº†ä¸€äº›é’ˆå¯¹æœ‰åºï¼ˆå‡åºï¼‰æ•°ç»„çš„æ“ä½œã€‚

sortedIndex / sortedLastIndex å¯ä»¥æ“ä½œåŸºæœ¬çš„ number æ•°ç»„å’Œ string æ•°ç»„ï¼š

```js
// è¿”å›æ’å…¥è¯¥å…ƒç´ åä»ç„¶èƒ½ä¿æŒæ•°ç»„æœ‰åºçš„ç¬¬ä¸€ä¸ªä¸‹æ ‡ä½ç½®
_.sortedIndex(array, value);
// ç±»ä¼¼ sortedIndexï¼Œä½†è¿”å›æœ€åä¸€ä¸ªèƒ½ä¿æŒé¡ºåºçš„ä¸‹æ ‡ä½ç½®
_.sortedLastIndex(array, value);

// example
_.sortedIndex([1, 20, 20, 100, 500], 20); // 1
_.sortedLastIndex([1, 20, 20, 100, 500], 20); // 3
```

ä¸Šé¢ä¸¤ä¸ªå‡½æ•°éƒ½åªèƒ½åœ¨æ•°å­—å’Œå­—ç¬¦ä¸²æ•°ç»„ä¸­ä½¿ç”¨ï¼Œå¯¹äºå¯¹è±¡æ•°ç»„ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªå‡½æ•°è¡¨ç¤ºå…ƒç´ ä¹‹é—´çš„æ’åºä¾æ®ï¼š

```js
// ä»¥ iteratee è½¬åŒ–åçš„ç»“æœæ’åº
_.sortedIndexBy(array, value [, iteratee])
_.sortedLastIndexBy(array, value [, iteratee])

// example
_.sortedIndexBy([{ 'x': 4 }, { 'x': 5 }], { 'x': 4 }, function(o) { return o.x; });
// => 0
```

æ³¨æ„ï¼ŒsortedIndex/sortedLastIndex å¹¶ä¸èƒ½ç›´æ¥ç”¨äºå…ƒç´ æŸ¥æ‰¾ï¼Œæ¯”å¦‚ä¸Šé¢è¿”å›ä¸‹æ ‡ 3ï¼Œä½† array\[3\] æ˜¯ 100 è€Œä¸æ˜¯ 20ã€‚

æœ‰åºæ•°ç»„æŸ¥æ‰¾ç”¨ sortedIndexOf/sortedLastIndexOfï¼Œå®ƒçš„åŠŸèƒ½ä¸ indexOf/lastIndexOf ä¸€æ ·ï¼Œä¸è¿‡é‡‡ç”¨äº†äºŒåˆ†æŸ¥æ‰¾ã€‚

```js
_.sortedIndexOf(array, value);
_.sortedLastIndexOf(array, value);

// example
_.sortedIndexOf([4, 5, 5, 5, 6], 5); //1
```

sortedUniq/sortedUniqBy å¯ä»¥å¯¹æœ‰åºæ•°ç»„å»é‡ã€‚

```js
_.sortedUniq(array)
_.sortedUniqBy(array [, iteratee])

// example
_.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);
// => [1.1, 2.3]
```

#### 4.3.4. å…ƒç´ æ“ä½œï¼šå–æ ·/æ‰“ä¹±/è®¡æ•°

```js
// éšæœºè¿”å›ä¸€ä¸ªå…ƒç´ 
_.sample(collection)
// éšæœºè¿”å›nä¸ªå…ƒç´ 
_.sampleSize(collection, [n=1])

// æ‰“ä¹±æ•°ç»„
_.shuffle(collection)

// è®¡æ•°
_.countBy(collection [, iteratee])
_.countBy([6.1, 4.2, 6.3], Math.floor);
// => { '4': 1, '6': 2 }
```

### 4.4. å¯¹è±¡æ“ä½œ

#### 4.4.1. å¯¹è±¡è½¬æ¢

å¼€å‘ä¸­ç»å¸¸éœ€è¦ä»å·²æœ‰å¯¹è±¡æ”¹é€ ï¼Œå¾—åˆ°æˆ‘ä»¬æœŸæœ›çš„ç»“æ„ã€‚Lodash ä¸­æœ‰å¾ˆå¤šå‡½æ•°å¯ä»¥æ´¾ä¸Šç”¨åœºï¼š

```js
// å…‹éš†
_.clone(value);
_.cloneWith(value, customizer);
_.cloneDeep(value);
_.cloneDeepWith(value, customizer);

// åŒ Object.assign,æŠŠ sources å¯¹è±¡ä¸­çš„è‡ªæœ‰å±æ€§èµ‹å€¼åˆ° object ä¸­
_.assign(object, ...sources);
// è½¬åŒ–åèµ‹å€¼
_.assignWith(_.assignWith(object, sources, customizer));

// ç±»ä¼¼_.assign, ä½†ä¼šèµ‹å€¼ç»§æ‰¿å±æ€§
_.assignIn(object, ...sources);
_.assignInWith(object, ...sources, customizer);

// å½“objectä¸­ä¸å­˜åœ¨å€¼æ—¶ï¼Œæ‰ä¼šèµ‹å€¼ï¼Œç»å¸¸ç”¨äºåˆå¹¶é»˜è®¤å€¼
_.defaults(object, ...sources);
// _.default ä¸é€‚ç”¨å¤šå±‚å¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨_.defaultsDeep
_.defaultsDeep(object, ...sources);

// åˆå¹¶å¯¹è±¡ï¼Œç±»ä¼¼ _.assign,ä½†å¯¹è±¡ä¼šé€’å½’æ·±å…¥ï¼Œæ•°ç»„ä¼šè¢«æ‹¼æ¥
_.merge(object, ...sources);
_.mergeWith(object, ...sources);
```

æ³¨æ„ï¼Œä¸Šé¢è¿™äº›å‡½æ•°éƒ½ä¼šç›´æ¥ä¿®æ”¹ object å‚æ•°ã€‚

ä¸æ­¤ä¸åŒï¼Œpick å’Œ omit æ“ä½œåˆ™è¿”å›æ–°å¯¹è±¡ï¼Œä¸ä¿®æ”¹å‚æ•°ï¼š

```js
// ä»å¯¹è±¡ä¸­å–å‡ºå¯¹åº”è·¯å¾„çš„å€¼ï¼Œåˆæˆä¸€ä¸ªæ–°å¯¹è±¡
_.pick(object, [paths]);
// ç”¨ä¸€ä¸ªæ–­è¨€å‡½æ•°å†³å®šè¦ä¸è¦å–è¿™ä¸ªå±æ€§ï¼Œpredicate(value,key)
_.pickBy(object, predicate);

// å»æ‰æŒ‡å®šå±æ€§ï¼ŒæŠŠä½™ä¸‹éƒ¨åˆ†åˆæˆä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ€§èƒ½å·®äº pick
_.omit(object, [paths]);
_.omitBy(object, predicate);

// examples
_.pick({ a: 1, b: "2", c: 3 }, ["a", "c"]);
// => { 'a': 1, 'c': 3 }
_.pickBy({ a: 1, b: "2", c: 3 }, _.isNumber);
// => { 'a': 1, 'c': 3 }

_.omit({ a: 1, b: "2", c: 3 }, ["a", "c"]);
// => { 'b': '2' }
```

å¦å¤–ï¼Œå¯¹è±¡è¿˜èƒ½åƒæ•°ç»„ä¸€æ ·è¿›è¡Œ map ï¼š

```js
// iteratee(value,key,obj) è¿”å›çš„ç»“æœä½œä¸ºæ–°å¯¹è±¡çš„key
_.mapKeys(object, iteratee);
// iteratee(value,key,obj) è¿”å›çš„ç»“æœä½œä¸ºæ–°å¯¹è±¡çš„value
_.mapValues(object, iteratee);

// example
_.mapKeys({ a: 1, b: 2 }, function (value, key) {
  return key + value;
});
// => { 'a1': 1, 'b2': 2 }
```

#### 4.4.2. éå†å¯¹è±¡

```js
// éå†è‡ªæœ‰å±æ€§ï¼Œç±»ä¼¼ for...in åŠ  hasOwnPropertyåˆ¤æ–­ã€‚
_.forOwn(object, iteratee);

// æŸ¥æ‰¾ç¬¦åˆæ¡ä»¶çš„keyï¼Œç±»ä¼¼æ•°ç»„çš„findIndex
_.findKey(object, iteratee);
_.findLastKey(object, iteratee);

// æŸ¥æ‰¾å¯¹è±¡ä¸­çš„å‡½æ•°å±æ€§
_.functions(object);
_.functionsIn(object);
```

#### 4.4.3. å®‰å…¨çš„ get/set

åœ¨ JavaScript ä¸­ï¼Œè¯»å–å’Œè®¾ç½®æŸä¸€ä¸ªè·¯å¾„ä¸‹çš„å€¼ï¼Œæ˜¯ä¸å®‰å…¨çš„ï¼š

```js
const object={a:1};
const=object.b.someKey;   // TypeError: Cannot read properties of undefined
object.c.someKey=v;       // TypeError: Cannot set properties of undefined
```

Lodash ä¸ºæˆ‘ä»¬æä¾›äº†æ›´å®‰å…¨çš„ get å’Œ set æ“ä½œï¼š

```js
// å½“pathå¯¹åº”çš„å€¼ä¸å­˜åœ¨æ—¶ï¼Œè¿”å›undefinedï¼Œè€Œä¸æ˜¯æŠ¥é”™ã€‚
_.get(object,path [, defaultValue]);
// ä¸€å±‚å±‚set,è€Œä¸æ˜¯æŠ¥é”™
_.set(object,path,value);
// æ ¹æ®è¯¥è·¯å¾„ç°åœ¨çš„valueï¼Œæ›´æ–°ä¸ºupdaterè¿”å›åçš„å€¼,updater(value)=>newValue
_.update(object,path,updater)
```

å°½ç®¡æœ€è¿‘çš„ [å¯é€‰é“¾ "?."](https://zh.javascript.info/optional-chaining) è¯­æ³•èƒ½å–ä»£ get å‡½æ•°ï¼Œä½† set æ“ä½œä¾ç„¶æ²¡æœ‰è¾ƒå¥½çš„åŸç”Ÿæ”¯æŒã€‚

### 4.5. å‡½æ•°æ“ä½œ

#### 4.5.1. æ§åˆ¶å‡½æ•°æ‰§è¡Œ

æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ç‰¹å®šæ¡ä»¶ä¸‹å‡½æ•°æ‰æ‰§è¡Œï¼Œæ¯”å¦‚å¸¸è§çš„é˜²æŠ–å’ŒèŠ‚æµï¼š

- é˜²æŠ–(debounce)ï¼šå½“å‡½æ•°è°ƒç”¨æ—¶ï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´å†æ‰§è¡Œå®é™…æ“ä½œï¼ˆå†…éƒ¨å‡½æ•°ï¼‰ï¼Œå¦‚æœè¿™æ®µæ—¶é—´å†…å‡½æ•°å†æ¬¡è¢«è°ƒç”¨ï¼Œåˆ™æœ¬æ¬¡è°ƒç”¨ä¸æ‰§è¡Œå®é™…æ“ä½œï¼Œæ–°è°ƒç”¨é‡æ–°å¼€å§‹ç­‰å¾…ã€‚
- èŠ‚æµ(throttle)ï¼šä¸€æ®µæ—¶é—´å†…å¤šæ¬¡è°ƒç”¨å‡½æ•°ï¼Œåªæ‰§è¡Œä¸€æ¬¡å®é™…æ“ä½œã€‚

```js
_.debounce(func [, wait=0] [, options={}])
_.throttle(func [, wait=0] [, options={}])

// examples
// åªä¼šåœ¨åœä½ä¹‹åé‡æ–°å¸ƒå±€
window.addEventListener('resize', _.debounce(calculateLayout, 150));
// ä¼šæŒç»­æ›´æ–°ä½ç½®ï¼Œä½†150msæ›´æ–°ä¸€æ¬¡ï¼Œé¿å…å¡é¡¿
window.addEventListener('resize', _.throttle(updatePosition, 150));
```

ä¹Ÿå¯ä»¥æ ¹æ®è°ƒç”¨æ¬¡æ•°æ§åˆ¶æ˜¯å¦æ‰§è¡Œæ“ä½œã€‚

```js
// å‡½æ•°åªè°ƒç”¨ä¸€æ¬¡
_.once(func);
// åªåœ¨å‰næ¬¡è°ƒç”¨
_.before(func, n);
// åªåœ¨næ¬¡ä¹‹åæ‰è°ƒç”¨
_.after(func, n);
```

å»¶è¿Ÿæ‰§è¡Œï¼š

```js
// åœ¨æœ¬æ¬¡è°ƒç”¨å †æ ˆè¢«æ¸…ç©ºåæ‰§è¡Œ
_.defer(func, ...args);
// ç­‰å¾…wait ms åæ‰§è¡Œï¼ŒåŒsetTimeout
_.delay(func, wait, ...args);
```

\_.memorize èƒ½ç¼“å­˜å‡½æ•°ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—ï¼Œæ˜¯ä¸€ç§å¸¸è§çš„æ€§èƒ½ä¼˜åŒ–æ‰‹æ®µã€‚

```js
// resolverç”¨äºè®¡ç®—ç¼“å­˜keyï¼Œå½“keyç›¸åŒæ—¶ï¼Œä½¿ç”¨ç¼“å­˜ã€‚é»˜è®¤ä½¿ç”¨funcçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºkey
_.memorize(func [, resolver])
```

#### 4.5.2. å‡½æ•°å‚æ•°è½¬æ¢

```js
// æŸ¯é‡ŒåŒ–
_.curry(func, (arity = func.length));
// ç»‘å®šéƒ¨åˆ†å‚æ•°ï¼Œä½†ä¸ç»‘å®šthis
_.partial(func, ...args);

// åªæ¥æ”¶å‰nä¸ªå‚æ•°ï¼Œå¿½ç•¥é¢å¤–å‚æ•°
_.ary(func, n);
// åªæ¥æ”¶ç¬¬ä¸€ä¸ªå‚æ•°,åŒ _.ary(func,1)
_.unary(func);
```

### 4.6. é€šç”¨å·¥å…·

æµæ°´çº¿ï¼š

```js
_.flow([funcs]);

const pascalCase = _.flow(_.upperFirst, _.camelCase);
```

ç”Ÿæˆä¸€ä¸ªå”¯ä¸€ IDï¼š

```js
_.uniqueId((prefix = ""));
```

## å‚è€ƒ

- [Why the name 'underscore' or 'lodash'? - Stack Overflow](https://stackoverflow.com/questions/38006384/why-the-name-underscore-or-lodash)
- [javascript - Correct way to import lodash - Stack Overflow](https://stackoverflow.com/questions/35250500/correct-way-to-import-lodash)
- [Lodash cheatsheet](https://devhints.io/lodash)