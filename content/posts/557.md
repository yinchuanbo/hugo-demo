---
title: "æ¶¨å§¿åŠ¿äº†ï¼Œæ®Šé€”åŒå½’çš„å›¾ç‰‡äº¤äº’åŠ¨æ•ˆåˆ¶ä½œï¼"
date: 2023-04-24T10:04:44+08:00
---

æœ€è¿‘ï¼Œåœ¨ CodePen ä¸Šï¼Œçœ‹åˆ°ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„å›¾ç‰‡åŠ¨æ•ˆï¼Œæ•ˆæœå¦‚ä¸‹ï¼š

<img src="/imgs/27/01.gif" />

åŸæ•ˆæœé“¾æ¥ï¼šCodePen Demo - 1 div pure CSS blinds staggered animation in 13 declarations<sup style="line-height: 0; color: rgb(30, 107, 184); font-weight: bold; visibility: visible;">[1]</sup>

æœ¬èº«è¿™ä¸ªåŠ¨ç”»æ•ˆæœï¼Œå¹¶æ²¡æœ‰å¤šæƒŠè‰³ã€‚æƒŠè‰³çš„åœ°æ–¹åœ¨äºåŸä½œè€…çš„å®ç°æ–¹å¼éå¸¸æœ‰è¶£ï¼Œæˆ‘ä»¬ç®€å•æ¥çœ‹çœ‹ï¼š

```html
<div></div>
```

```scss
$base: "https://images.unsplash.com/";
$imid: "1608848461950-0fe51dfc41cb";
$size: 800;

/* declarations 1 through 3 are for layout */
html,
body,
div {
  display: grid;
} /* 1 */

html {
  height: 100%;
} /* 2 */

div {
  place-self: center; /* 3 */
  background: /* cat image */ url("#{$base}photo-#{$imid}?w=#{$size}") 50% /
    cover; /* 4 */

  &::after {
    padding: 200px; /* 5 size element */
    background: /* blinds */
   /* top to bottom 50% lightness grey to white
    * repeating gradient (16 repetitions) */
   /* slightly lighter than 50% grey to fix Chrome on Android glitch */ repeating-linear-gradient(
        hsl(0, 0%, 52.5%),
        #fff 6.25%
      ),
      /* 50% lightness grey to white gradient
    * the top third of the gradient is fully grey
    * the middle third is the gradient transition
    * from the 50% lightness grey of the first third
    * to white, which also covers the bottom third */
        /* extra black stop added to fix Chrome on Android glitch */
        linear-gradient(#000 33.3%, grey 0, #fff 66.7%) /* background height is 3x the element's height */
        0/ 100% 300%; /* 6 */
    /* for reference: this talk where I go into
   * the multiply blend mode (Chromium only slides)
   * https://codepen.io/thebabydino/project/full/ZjwjBe */
    background-blend-mode: multiply; /* 7 */
    /* use a very high contrast value to make
   * all greys darker than the 50% lightness one black
   * and all others white
   * from top to bottom, this gives us
   * horizontal white bands of increasing height
   * with black in between */
    filter: contrast(999); /* 8 */
    /* also detailed in the talk mentioned above
   * wherever this pseudo is white, result of blending
   * with parent (with cat background) is white;
   * wherever this pseudo is black, result of blending
   * with parent is the parent (cat background here) */
    mix-blend-mode: screen; /* 9 */
    /* background-position animation goes back and forth */
    animation: p 1s linear infinite alternate; /* 10 */
    content: ""; /* 11 necesarry for pseudo to show up */
  }
}

@keyframes p {
  /* cat is covered by grey top third of tall gradient, 
  * which results in a fully black pseudo after 
  * blending backgrounds & applying contrast 
  * => result after blending it with the cat is the cat*/
  0%,
  25% {
    background-position: 0 0;
  } /* 12 */
  /* cat is covered by white bottom third of tall gradient, 
  * which results in a fully white pseudo after 
  * blending backgrounds & applying contrast 
  * => fully white result after blending with cat */
  75%,
  100% {
    background-position: 0 100%;
  } /* 13 */
}
```

æ€ä¹ˆæ ·ï¼Œå®é™…ä»£ç è¡Œæ•°ä¸é”™ï¼Œå¤§éƒ¨åˆ†æ˜¯æ³¨é‡Šã€‚

æ•´ä¸ªæ•ˆæœçš„æ ¸å¿ƒæ˜¯åˆ©ç”¨äº†**æ¸å˜ + `mix-blend-mode`ã€`background-blend-mode` ä»¥åŠæ»¤é•œ filter**ã€‚ç›¸ä¿¡å¤§éƒ¨åˆ†äººçœ‹åˆ°ä¸Šè¿°çš„ä»£ç ä¸è°ƒè¯•ä¸€ç•ªæ˜¯ä¸çŸ¥é“åˆ°åº•å‘ç”Ÿäº†å•¥çš„ã€‚ï¼ˆæˆ‘ä¹Ÿæ˜¯ï¼‰

å½“ç„¶ï¼Œæœ¬æ–‡ä¸æ˜¯æ¥å‰–æåŸä½œè€…çš„æ„æ€å·§å¦™ï¼Œè€Œæ˜¯æƒ³å°±ç€è¿™ä¸ªæ•ˆæœï¼Œæ€è€ƒä¸€ä¸‹ï¼Œåœ¨ CSS ä¸­ï¼Œæˆ‘ä»¬æ˜¯å¦æœ‰åŠæ³•ä½¿ç”¨å…¶ä»–æ–¹å¼ï¼Œå¿«é€Ÿè¿˜åŸåŒæ ·çš„åŠ¨ç”»æ•ˆæœï¼Ÿ

ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨ CSS @property å’Œ mask çš„ç»„åˆï¼Œå¿«é€Ÿè¿˜åŸä¸Šè¿°åŠ¨ç”»æ•ˆæœã€‚

## åŠ¨ç”»åˆ†è§£

å…¶å®ä¸Šé¢çš„åŠ¨ç”»ï¼Œæ•´ä½“è€Œè¨€å¯ä»¥æ‹†è§£æˆä¸¤ä¸ªéƒ¨åˆ†ã€‚

1. å‘ä¸Šé®ç½©æ¶ˆå¤±åŠ¨ç”»

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®ç°è¿™ä¹ˆä¸€ä¸ªå‘ä¸Šçš„é®ç½©æ¶ˆå¤±åŠ¨ç”»ï¼š

<img src="/imgs/27/02.gif" />

æ–¹æ³•å¾ˆå¤šï¼Œä½†æ˜¯æœ€é€‚åˆç”¨äºå®ç°è¿™ç±»æ•ˆæœçš„æ˜¯ `mask` æˆ–è€… `clip-path`ï¼Œå½“ç„¶ï¼Œéœ€è¦é…åˆä¸Š CSS @propertyã€‚

æˆ‘ä»¬ä½¿ç”¨ mask é…åˆä¸Š CSS @propertyï¼Œè¿™ä¸ªæ•ˆæœå…¶å®å¾ˆç®€å•ï¼Œä»£ç å¦‚ä¸‹

```html
<div></div>
```

```css
@property --per {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}

div {
  background: url(https://picsum.photos/400/400?random=100);
  width: 400px;
  height: 400px;
  mask: linear-gradient(
    #000,
    #000 var(--per),
    transparent var(--per),
    transparent
  );
  animation: change 3s infinite linear;
}

@keyframes change {
  0%,
  60% {
    --per: 100%;
  }
  70%,
  100% {
    --per: 0%;
  }
}
```

æ ¸å¿ƒå°±åœ¨äºè®¾å®šäº†è¿™æ ·ä¸€ä¸ª mask -- `linear-gradient(#000, #000 var(--per), transparent var(--per), transparent)`ï¼Œå…¶ä¸­ `--per` è¿™ä¸ª CSS å˜é‡çš„å€¼è¡¨ç¤ºçš„å°±æ˜¯é€æ˜ä¸æ˜¾ç¤ºçŠ¶æ€çš„ä¸€ä¸ªç™¾åˆ†æ¯”å€¼ã€‚åŠ¨ç”»è¿‡ç¨‹ä¸­ï¼Œåªéœ€è¦åŠ¨æ€çš„å°†è¿™ä¸ªç™¾åˆ†æ¯”å€¼ä» `100%` ä¿®æ”¹ä¸º `0%` å³å¯å®Œæˆå‘ä¸Šé®ç½©æ¶ˆå¤±åŠ¨ç”»ã€‚

è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†è¿™ä¹ˆä¸ªæ•ˆæœï¼š

<img src="/imgs/27/03.gif" />

> å¦‚æœä½ å¯¹ mask å’Œ CSS @property çš„ç”¨æ³•è¿˜ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œå»ºè®®ä½ å…ˆçœ‹çœ‹è¿™ä¸¤ç¯‡ï¼Œè¡¥é½ä¸€ä¸‹åŸºç¡€çŸ¥è¯†ï¼š
>
> [1.å¥‡å¦™çš„ CSS MASK<sup style="line-height: 0;color: #1e6bb8;font-weight: bold;">[2]</sup>](http://mp.weixin.qq.com/s?__biz=Mzg2MDU4MzU3Nw==&mid=2247491371&idx=1&sn=f0c87cdbce78fedcef2d616c1da0b340&chksm=ce257cddf952f5cbfe4f735f7f6c801357c8a8a2772167f6ccce910db6fc5494189414e08817&scene=21#wechat_redirect)
>
> [2.CSS @propertyï¼Œè®©ä¸å¯èƒ½å˜å¯èƒ½<sup style="line-height: 0;color: #1e6bb8;font-weight: bold;">[3]</sup>](http://mp.weixin.qq.com/s?__biz=Mzg2MDU4MzU3Nw==&mid=2247485983&idx=1&sn=6f2e58bb6ad316f9c632d0ec23792923&chksm=ce2569e9f952e0ff49d827cc906ad274b215ca54322f12c5a87549b866a817c906196480b16a&scene=21#wechat_redirect)

2. ç™¾å¶çª—åŠ¨ç”»

å…¶æ¬¡ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªç™¾å¶çª—åŠ¨ç”»æ•ˆæœï¼Œåƒæ˜¯è¿™æ ·ï¼š

<img src="/imgs/27/04.gif" />

åœ¨ç†è§£äº†ä¸Šé¢çš„å‘ä¸Šé®ç½©æ¶ˆå¤±åŠ¨ç”»åï¼Œå…¶å®è¿™é‡Œçš„ç™¾å¶çª—åŠ¨ç”»åªæ˜¯è¿·ä½ ç‰ˆæœ¬çš„å‘ä¸Šé®ç½©æ¶ˆå¤±åŠ¨ç”»ã€‚

ä¸ä¸Šè¿°çš„ä»£ç å®Œå…¨ä¸€è‡´ï¼Œåªæ˜¯è°ƒæ•´ä¸€ä¸‹ `mask-size` å³å¯ã€‚

```css
@property --per {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}

div {
  background: url(https://picsum.photos/400/400?random=100);
  width: 400px;
  height: 400px;
  mask: linear-gradient(
    #000,
    #000 var(--per),
    transparent var(--per),
    transparent
  );
  mask-size: 100px 20px;
  animation: change 3s infinite linear;
}

@keyframes change {
  0%,
  60% {
    --per: 100%;
  }
  70%,
  100% {
    --per: 0%;
  }
}
```

æ³¨æ„ï¼Œä¸Šé¢çš„ä»£ç ä¸ç¬¬ä¸€æ®µä»£ç å‡ ä¹å®Œå…¨ä¸€è‡´ï¼Œä»…ä»…åœ¨äºå¤šåŠ äº† `mask-size: 100px 20px`ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¿«é€Ÿçš„å¾—åˆ°äº†ç™¾å¶çª—çš„åˆ‡æ¢åŠ¨ç”»æ•ˆæœï¼š

<img src="/imgs/27/05.gif" />

3. ç»“åˆ**å‘ä¸Šé®ç½©æ¶ˆå¤±åŠ¨ç”»**ä¸**ç™¾å¶çª—åŠ¨ç”»**

æœ‰äº†ä¸Šè¿°ä¸¤ä¸ªåŠ¨ç”»ï¼Œå…¶å®æˆ‘ä»¬åªéœ€è¦æŠŠå®ƒä»¬ç»“åˆä¸€ä¸‹ï¼Œå°±å¯ä»¥å¾—åˆ°æ–‡ç« ä¸€å¼€å¤´çš„æ•ˆæœã€‚

å®Œæ•´çš„ä»£ç å¦‚ä¸‹ï¼š

```css
@property --per {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 100%;
}

div {
  background: url(https://picsum.photos/400/400?random=100);
  width: 400px;
  height: 400px;
  mask: linear-gradient(
      #000,
      #000 var(--per),
      transparent var(--per),
      transparent
    ), linear-gradient(#000, #000 var(--per), transparent var(--per), transparent);
  mask-size: 100px 20px, 100% 100%;
  animation: change 3s infinite linear;
}

@keyframes change {
  0%,
  60% {
    --per: 100%;
  }
  70%,
  100% {
    --per: 0%;
  }
}
```

è¿™æ ·ï¼Œæˆ‘ä»¬å°±æˆåŠŸçš„åˆ©ç”¨äº†ä¸€ç§å…¶å®ƒæ–¹å¼ï¼Œè¿˜åŸäº†æ–‡ç« ä¸€å¼€å¤´çš„åŠ¨ç”»æ•ˆæœï¼š

<img src="/imgs/27/06.gif" />

CodePen Demo -- Image Hover Effect<sup style="line-height: 0;color: #1e6bb8;font-weight: bold;">[4]</sup>

## æ‰©å±•å»¶ä¼¸

å½“ç„¶ï¼ŒæŒæ¡äº†ä¸Šè¿°åŠ¨ç”»çš„æŠ€å·§åï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥è¿›è¡Œä¸€äº›å»¶ä¼¸å°è¯•ã€‚

è­¬å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸Šé¢ mask çš„ `linear-gradient()` æ›¿æ¢æˆ `radial-gradient()`ã€‚

åŸç†ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼š

```css
@property --per1 {
  syntax: "<length>";
  inherits: false;
  initial-value: 20px;
}
@property --per2 {
  syntax: "<percentage>";
  inherits: false;
  initial-value: 0%;
}

div {
  background: url(https://picsum.photos/400/400?random=100);
  width: 400px;
  height: 400px;
  mask: repeating-radial-gradient(
      #000,
      #000 var(--per1),
      transparent var(--per1),
      transparent 20px
    ), radial-gradient(transparent, transparent var(--per2), #000 var(--per2), #000);
  animation: change 3s infinite linear;
}

@keyframes change {
  0%,
  60% {
    --per1: 20px;
    --per2: 0%;
  }
  70%,
  100% {
    --per1: 0px;
    --per2: 100%;
  }
}
```

åªæ˜¯ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº†ä¸¤ä¸ª CSS @property å˜é‡ã€‚è¿™æ ·ï¼Œå°±å®ç°äº†ä¸€ä¸ªç¯å½¢çš„é€’è¿›å‘å¤–çš„ç™¾å¶çª—æ¶ˆå¤±åŠ¨ç”»ï¼š

<img src="/imgs/27/07.gif" />

ç¨åŠ æ”¹é€ ï¼Œå°±èƒ½å®ç° Hover äº¤äº’æ•ˆæœï¼š

```css
div {
  cursor: pointer;
  transition: --per1 0.3s, --per2 0.3s;
}
div:hover {
  --per1: 0px;
  --per2: 100%;
}
```

ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„ Hover æ•ˆæœå°±å®ç°äº†ï¼š

å®Œæ•´çš„ä»£ç ï¼Œä½ å¯ä»¥æˆ³è¿™é‡Œï¼šCodePen Demo -- Image Hover Effect<sup style="line-height: 0;color: #1e6bb8;font-weight: bold;">[5]</sup>

## æœ€å

æƒ³ Get åˆ°æœ€æœ‰æ„æ€çš„ CSS èµ„è®¯ï¼Œåƒä¸‡ä¸è¦é”™è¿‡æˆ‘çš„å…¬ä¼—å· -- **iCSS å‰ç«¯è¶£é—»** ğŸ˜„

æ›´å¤šç²¾å½© CSS æŠ€æœ¯æ–‡ç« æ±‡æ€»åœ¨æˆ‘çš„ Github -- iCSS<sup style="line-height: 0;color: #1e6bb8;font-weight: bold;">[6]</sup> ï¼ŒæŒç»­æ›´æ–°ï¼Œæ¬¢è¿ç‚¹ä¸ª star è®¢é˜…æ”¶è—ã€‚

å¦‚æœè¿˜æœ‰ä»€ä¹ˆç–‘é—®æˆ–è€…å»ºè®®ï¼Œå¯ä»¥å¤šå¤šäº¤æµï¼ŒåŸåˆ›æ–‡ç« ï¼Œæ–‡ç¬”æœ‰é™ï¼Œæ‰ç–å­¦æµ…ï¼Œæ–‡ä¸­è‹¥æœ‰ä¸æ­£ä¹‹å¤„ï¼Œä¸‡æœ›å‘ŠçŸ¥ã€‚

### å‚è€ƒèµ„æ–™

\[1\] CodePen Demo - 1 div pure CSS blinds staggered animation in 13 declarations: _https://codepen.io/thebabydino/pen/MWPWXXw_

\[2\] å¥‡å¦™çš„ CSS MASK: _https://github.com/chokcoco/iCSS/issues/80_

\[3\] CSS @propertyï¼Œè®©ä¸å¯èƒ½å˜å¯èƒ½: _https://github.com/chokcoco/iCSS/issues/109_

\[4\] CodePen Demo -- Image Hover Effect: _https://codepen.io/Chokcoco/pen/gOBPZaQ?editors=1100_

\[5\] CodePen Demo -- Image Hover Effect: _https://codepen.io/Chokcoco/pen/PoyZXgo_

\[6\] Github -- iCSS: _https://github.com/chokcoco/iCSS_
