---
title: "ä»0åˆ°1æ­å»ºä¸€ä¸ª React é¡¹ç›®å¼€å‘æ¨¡æ¿"
date: 2023-04-19T19:31:14+08:00
---

## ğŸ‘¨ğŸ»â€ğŸ’» GitHub

### **é¡¹ç›® repo**: [react-enterprise-template](https://github.com/guokaigdg/react-enterprise-template)

## ğŸš€ æŠ€æœ¯æ ˆ

[![react](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1f8b74bb15d847a88f0f2ea4a644c38f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)](https://github.com/facebook/react/) [![TypeScript](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f1236eb28dab415ca8daf3d7d8317bfc~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)](https://github.com/microsoft/TypeScript)[![webpack](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c7ddf3dfb2f44c992639e7437b09254~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)](https://github.com/facebook/react/) [![axios](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/39d4004d415340149d2e6887f01a48e6~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)](https://github.com/axios/axios) [![mobx](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a1e30517735d4808a9e63129fd589b90~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)](https://github.com/mobx) [![react-router-dom](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d4358891f50e4c17b1f0ab84017a1a70~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)](https://github.com/remix-run/react-router)![https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ad153e52d71455ab5dc58171224cd43~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ad153e52d71455ab5dc58171224cd43~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp)

```sh
React v18
react-dom v18
TypeScript v4
webpack v5
axios v1
mobx v6
mobx-react-lite v3
react-router-dom v6
```

## ğŸ“± è¯´æ˜

- ğŸ“¦ å¼€ç®±å³ç”¨ï¼Œæ— éœ€é…ç½®
- ğŸ“ å…¨é¢æ³¨é‡Šè¯´æ˜ï¼Œå­¦ä¹ ä½æˆæœ¬
- ğŸš€ å¯åŠ¨ç¼–è¯‘è¿…é€Ÿ
- ğŸŒ± ææ˜“å®šåˆ¶, æ‹“å±•å®¹æ˜“

## ğŸ„ æ›´æ–°æ—¥å¿—

â‘  æ ·å¼å¤„ç† âœ… [config: ğŸ”§ æ–°å¢æ ·å¼æ–‡ä»¶ (css/less/sass/postCss) å¤„ç†](https://github.com/guokaigdg/react-enterprise-template/commit/11fb415bac609dfa7474a1ee2db93ccb4a350a51)

â‘¡ ä»£ç è§„èŒƒ âœ… [config: ğŸ”§ æ–°å¢ Prettier/ESlint/StyleLint/EditorConfig ä»£ç è§„èŒƒ](https://github.com/guokaigdg/react-enterprise-template/commit/87dd1ca333f81203dd245a6eb40479a0745f096f)

â‘¢ è·¯ç”±ç®¡ç† âœ… [config: ğŸ”§ æ–°å¢è·¯ç”±ç®¡ç† react-router-dom v6](https://github.com/guokaigdg/react-enterprise-template/commit/239446d0709eb52bad2b48af4983eef91c49f60d)

â‘£ ç½‘ç»œè¯·æ±‚ âœ… [feat: âœ¨ æ–°å¢ç½‘ç»œè¯·æ±‚ Axios v1](https://github.com/guokaigdg/react-enterprise-template/commit/27cd67f641d5ecf53b89770195f75bd32bccce46)

â‘¤ çŠ¶æ€ç®¡ç† âœ… [feat: âœ¨ æ–°å¢çŠ¶æ€ç®¡ç† Mobx v6](https://github.com/guokaigdg/react-enterprise-template/commit/992e1884943d4f8bda836f48c60df473418397d7)

â‘¥ React Hook è§„åˆ™ âœ… [feat: âœ¨ æ–°å¢ react hooks è§„åˆ™æ£€æŸ¥](https://github.com/guokaigdg/react-enterprise-template/commit/15346c07a9ffd74f69dd1bb0dd6a4a42aa72df57)

â‘¦ å°è£…å…¨å±€ SVG ç»„ä»¶ âœ… [feat: âœ¨ å°è£…å…¨å±€ SVG ç»„ä»¶](https://github.com/guokaigdg/react-enterprise-template/commit/066fc6ff28c1ac3b0d6422ebda8d59cdf9275d3a)

## ğŸ“‚ ç›®å½•ç»“æ„

###### ä¸‹æ–‡ä¸­æ–‡ä»¶åˆ›å»ºè·¯å¾„ä»¥æ­¤ä¸ºå‚è€ƒ

```bash
    â”œâ”€â”€ .vscode
    â”‚   â””â”€â”€setting.json                 # å…ˆäºvscodeå…¨å±€çš„settings.jsoné…ç½®
    â”œâ”€â”€ doc                             # å¼€å‘æ–‡æ¡£è®°å½•
    â”œâ”€â”€ webpack                         # æ‰“åŒ…ç¼–è¯‘
    â”‚   â””â”€â”€config                       # webpacké…ç½®
    â”‚       â”œâ”€â”€ webpack.common.js       # åŸºç¡€é…ç½®
    â”‚       â”œâ”€â”€ webpack.dev.js          # å¼€å‘ç¯å¢ƒé…ç½®
    â”‚       â””â”€â”€webpack.prod.js          # ç”Ÿäº§ç¯å¢ƒé…ç½®
    â”œâ”€â”€ pubilc
    â”‚   â”œâ”€â”€favicon.ico                  # HTMLå›¾æ ‡
    â”‚   â””â”€â”€index.html                   # HTMLå…¥å£æ¨¡æ¿
    â”œâ”€â”€ src
    |   â”œâ”€â”€ api                         # æ¥å£é…ç½®
    |   â”œâ”€â”€ assets                      # é™æ€èµ„æº
    â”‚   â”œâ”€â”€ components                  # é¡¹ç›®é€šç”¨é€šç”¨ç»„ä»¶
    â”‚   â”œâ”€â”€ http                        # è¯·æ±‚ç»Ÿä¸€å°è£…
    â”‚   â”œâ”€â”€ httpinterface               # tsç±»å‹å®šä¹‰
    â”‚   â”œâ”€â”€ constData                   # ç³»ç»Ÿå†…çš„å¸¸é‡åˆ—è¡¨
    â”‚   â”œâ”€â”€ router                      # ç»Ÿä¸€è·¯ç”±å…¥å£
    â”‚   â”œâ”€â”€ store                       # æ•°æ®å…±äº«
    â”‚   â”œâ”€â”€ styles                      # å…¨å±€æ ·å¼
    â”‚   â”œâ”€â”€ utils                       # å·¥å…·åº“
    â”‚   â”œâ”€â”€ view                        # é¡µé¢
    â”‚   â”œâ”€â”€ App.tsx                     # ä¸»ç•Œé¢
    â”‚   â””â”€â”€index.tsx                    # å…¥å£æ–‡ä»¶
    â”œâ”€â”€ .babelrc.js                     # babelé…ç½®
    â”œâ”€â”€ .editorconfig                   # è·¨ç¼–è¾‘å™¨ç»´æŠ¤ä¸€è‡´ç¼–ç é£æ ¼
    â”œâ”€â”€ .env.json                       # ç¯å¢ƒå˜é‡é…ç½®
    â”œâ”€â”€ .eslin tignore                  # ESLintå¿½ç•¥æ£€æµ‹æ–‡ä»¶
    â”œâ”€â”€ .eslintrc.js                    # ESLinté…ç½®
    â”œâ”€â”€ .gitignore                      # gitæäº¤å¿½ç•¥æ–‡ä»¶
    â”œâ”€â”€ .npmrc
    â”œâ”€â”€ .prettierignore                 # prettiercå¿½ç•¥æ–‡ä»¶
    â”œâ”€â”€ .prettierrc                     # prettiercé…ç½®
    â”œâ”€â”€ .stylelintrc.js                 # ä»£ç é£æ ¼é…ç½®
    â”œâ”€â”€ LICENSE                         # å¼€æºåè®®
    â”œâ”€â”€ package-lock.json               # npmå®‰è£…åŒ…é”å®šç®¡ç†
    â”œâ”€â”€ package.json                    # ä¾èµ–åŒ…ç®¡ç†
    â”œâ”€â”€ README.md                       # é¡¹ç›®è¯´æ˜
    â”œâ”€â”€ tsconfig.json                   # tsé…ç½®æ–‡ä»¶
    â””â”€â”€ yarn.lock                       # yarnå®‰è£…åŒ…é”å®šç®¡ç†
```

## â‘  é¡¹ç›®åˆå§‹åŒ–

### 1\. package.json

åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œpackage.json æ–‡ä»¶é€šå¸¸ç”¨äºå­˜å‚¨å’Œç®¡ç†å‰ç«¯é¡¹ç›®çš„ä¾èµ–å…³ç³»ã€‚ç”¨äºæè¿°é¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚åŒ…åã€ç‰ˆæœ¬å·ã€ä¾èµ–å…³ç³»ç­‰ã€‚é€šè¿‡ package.json æ–‡ä»¶ï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾åœ°ç®¡ç†é¡¹ç›®çš„ä¾èµ–å…³ç³»ã€ç‰ˆæœ¬å·ã€å†å²è®°å½•ç­‰ï¼Œå¹¶åœ¨é¡¹ç›®ä¸­è¿›è¡Œç‰ˆæœ¬æ§åˆ¶å’Œåä½œã€‚package.json æ–‡ä»¶åŒ…å«äº†ä»¥ä¸‹é‡è¦çš„å­—æ®µï¼š

```sh
nameï¼šé¡¹ç›®çš„åç§°ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå”¯ä¸€çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç”¨äºå‘å¸ƒåˆ° npm æˆ–è€…å…¶ä»–åŒ…ç®¡ç†å™¨ä¸­ã€‚
versionï¼šé¡¹ç›®çš„ç‰ˆæœ¬å·ï¼Œéµå¾ª Semantic Versioning è§„èŒƒã€‚
descriptionï¼šé¡¹ç›®çš„ç®€ä»‹å’Œæè¿°ã€‚
mainï¼šé¡¹ç›®çš„ä¸»å…¥å£æ–‡ä»¶ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª JavaScript æ–‡ä»¶ã€‚
scriptsï¼šåŒ…å«ä¸€ç»„å‘½ä»¤è¡Œè„šæœ¬ï¼Œç”¨äºè‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²ç­‰ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼š"start": "node index.js" è¡¨ç¤ºé€šè¿‡è¿è¡Œ npm start å‘½ä»¤å¯åŠ¨é¡¹ç›®ã€‚
dependenciesï¼šåˆ—å‡ºé¡¹ç›®æ‰€ä¾èµ–çš„åŒ…å’Œç‰ˆæœ¬ä¿¡æ¯ï¼Œè¿™äº›åŒ…ä¼šåœ¨å®‰è£…æ—¶è‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°ç¯å¢ƒä¸­ã€‚
devDependenciesï¼šåˆ—å‡ºé¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­æ‰€ä¾èµ–çš„åŒ…å’Œç‰ˆæœ¬ä¿¡æ¯ï¼Œè¿™äº›åŒ…åªåœ¨å¼€å‘æ—¶ä½¿ç”¨ï¼Œä¸ä¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ã€‚
peerDependenciesï¼šåˆ—å‡ºé¡¹ç›®è¿è¡Œæ—¶æ‰€ä¾èµ–çš„åŒ…å’Œç‰ˆæœ¬ä¿¡æ¯ï¼Œè¿™äº›åŒ…éœ€è¦åœ¨é¡¹ç›®çš„ä¸Šçº§ä¾èµ–ä¸­è¿›è¡Œå£°æ˜å’Œå®‰è£…ã€‚
enginesï¼šæŒ‡å®šé¡¹ç›®æ‰€éœ€çš„ Node.js å’Œ npm ç‰ˆæœ¬èŒƒå›´ã€‚
repositoryï¼šæŒ‡å®šé¡¹ç›®çš„ä»£ç ä»“åº“åœ°å€ã€‚
keywordsï¼šå…³é”®å­—æ•°ç»„ï¼Œç”¨äºæè¿°é¡¹ç›®çš„ä¸»é¢˜å’Œç±»å‹ã€‚
authorï¼šä½œè€…ä¿¡æ¯ã€‚
licenseï¼šé¡¹ç›®çš„è®¸å¯è¯ç±»å‹ã€‚
```

æ ¹ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç”Ÿæˆ package.jsonã€‚

```sh
yarn init -y
```

### 2\. README.md

readme.md ç”¨äºæè¿°æ–‡æ¡£å†…å®¹ã€‚

```sh
<h1 align="center">react æ¨¡æ¿</h1>
## ğŸ‘¨ğŸ»â€ğŸ’» é¡¹ç›®è¯´æ˜
```

### 3\. .npmrc

.npmrc æ–‡ä»¶æ˜¯ npm çš„é…ç½®æ–‡ä»¶ä¹‹ä¸€ï¼Œç”¨äºé…ç½® npm åœ¨æ‰§è¡Œå®‰è£…å’Œå‘å¸ƒç­‰æ“ä½œæ—¶çš„è¡Œä¸ºå’Œå‚æ•°ã€‚åœ¨å‰ç«¯é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ npm æˆ– Yarn ç®¡ç†ä¾èµ–å’Œæ„å»ºè„šæœ¬ï¼Œ.npmrc æ–‡ä»¶åˆ™æ˜¯è¿™äº›å·¥å…·çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¹‹ä¸€ã€‚.npmrc æ–‡ä»¶æ”¯æŒä»¥ä¸‹ç±»å‹çš„é…ç½®é¡¹ï¼š

- registryï¼šæŒ‡å®š npm çš„é•œåƒæºåœ°å€ï¼Œä¾‹å¦‚ registry=[registry.npm.taobao.org](https://registry.npm.taobao.org)ã€‚
- cacheï¼šæŒ‡å®š npm çš„ç¼“å­˜ç›®å½•ï¼Œä¾‹å¦‚ cache=/path/to/cacheã€‚
- proxyï¼šæŒ‡å®š npm çš„ç½‘ç»œä»£ç†è®¾ç½®ï¼Œä¾‹å¦‚ proxy=[my.proxy.com:8080](http://my.proxy.com:8080)ã€‚
- https-proxyï¼šæŒ‡å®š npm çš„ HTTPS ç½‘ç»œä»£ç†è®¾ç½®ï¼Œä¾‹å¦‚ https-proxy=[my.proxy.com:8080](http://my.proxy.com:8080)ã€‚
- strict-sslï¼šæŒ‡å®šæ˜¯å¦å¼€å¯ npm çš„ SSL è¯ä¹¦æ ¡éªŒï¼Œä¾‹å¦‚ strict-ssl=falseã€‚
- loglevelï¼šæŒ‡å®š npm çš„æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œä¾‹å¦‚ loglevel=warnã€‚
- save-exactï¼šæŒ‡å®šæ˜¯å¦åœ¨å®‰è£…ä¾èµ–æ—¶è‡ªåŠ¨ä¿å­˜ç²¾ç¡®çš„ç‰ˆæœ¬å·ï¼Œä¾‹å¦‚ save-exact=trueã€‚
- progressï¼šæŒ‡å®š npm çš„è¿›åº¦æ¡è¾“å‡ºè®¾ç½®ï¼Œä¾‹å¦‚ progress=falseã€‚
- accessï¼šæŒ‡å®šåŒ…çš„è®¿é—®æƒé™ï¼Œä¾‹å¦‚ access=public æˆ– access=restrictedã€‚

æœ¬é¡¹ç›®å°† npm æºè®¾ç½®ä¸ºæ·˜å®é•œåƒæºï¼Œæé«˜å®‰è£…é€Ÿåº¦ã€‚

```sh
npm config set registry https://registry.npm.taobao.org
```

.npmrc æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹

```sh
registry=https://registry.npm.taobao.org/
```

### 4\. .gitignore

.gitignore ç”¨äºæŒ‡å®š Git å¿½ç•¥çš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œè¿™äº›æ–‡ä»¶æˆ–ç›®å½•ä¸ä¼šè¢« Git è·Ÿè¸ªæˆ–æäº¤ã€‚å¯ä»¥å¸®åŠ©ä½ å‡å°‘ Git æ“ä½œæ—¶çš„æ–‡ä»¶æäº¤é‡ï¼Œå‡å°ä»“åº“çš„ä½“ç§¯å’Œç»´æŠ¤æˆæœ¬ï¼Œæé«˜ Git ä»“åº“çš„æ€§èƒ½å’Œç¨³å®šæ€§ã€‚

å®Œæ•´å†…å®¹ç‚¹å‡»æŸ¥çœ‹ [.gitignore](https://github.com/guokaigdg/react-enterprise-template/blob/main/.gitignore)ã€‚

## â‘¡ Webpack é…ç½®

![18586afe0401616d302ff6b1ae1cecd0.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0359e6ff351646ed9ffbb3528abcb396~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

#### **å®˜æ–¹æ–‡æ¡£**ï¼š[webapck](https://webpack.docschina.org/api/)

Webpack æ˜¯ä¸€ä¸ªæ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œå¯ä»¥å°†å¤šä¸ªæ¨¡å—æ‰“åŒ…æˆä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚Webpack å¯ä»¥å¤„ç†å„ç§ç±»å‹çš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬ JavaScriptã€CSSã€å›¾ç‰‡ç­‰ï¼Œå¹¶å¯ä»¥å¤„ç†æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ä»¥ä¸‹æ˜¯ Webpack çš„ä¸€äº›è¯´æ˜ï¼š

### 1\. å®‰è£… webpack

```sh
yarn add webpack webpack-cli webpack-dev-server@3.11.2 webpack-merge -D
```

### 2\. å®‰è£… webpack ç›¸å…³æ’ä»¶

```sh
yarn add html-webpack-plugin -D                 # ç®€åŒ– HTML æ–‡ä»¶åˆ›å»ºä»¥æœåŠ¡æ†ç»‘åŒ…çš„æ’ä»¶, å°†jsæ–‡ä»¶è‡ªåŠ¨å¼•è¿› html æ–‡ä»¶ä¸­
yarn add chalk@4.1.2 -D                         # ç»ˆç«¯å­—ç¬¦ä¸²æ ·å¼ä¸ªæ€§åŒ–è‡ªå®šä¹‰
yarn add detect-port-alt -D                     # ç«¯å£æ£€æµ‹
yarn add ip -D                                  # è·å–ipåœ°å€
yarn add copy-webpack-plugin -D                 # å°†å·²å­˜åœ¨çš„å•ä¸ªæ–‡ä»¶æˆ–æ•´ä¸ªç›®å½•å¤åˆ¶åˆ°ç”Ÿæˆç›®å½•
yarn add css-minimizer-webpack-plugin -D        # è¿™ä¸ªæ’ä»¶ä¼˜åŒ–å’Œå‹ç¼©css
yarn add mini-css-extract-plugin -D             # æŠ½ç¦»cssæ–‡ä»¶, å°†csså–åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ï¼Œä¸ºæ¯ä¸ªåŒ…å«cssçš„jsä»¶åˆ›å»ºä¸€ä¸ªcssæ–‡ä»¶ã€‚
yarn add fork-ts-checker-webpack-plugin -D      # å¯åŠ¨æœ¬åœ°æœåŠ¡/æ‰“åŒ…é”™è¯¯æç¤º, å•ç‹¬çš„è¿›ç¨‹ä¸Šè¿è¡Œ TypeScript ç±»å‹æ£€æŸ¥å™¨ã€‚
yarn add error-overlay-webpack-plugin -D        # è¿™ä¸ªæ’ä»¶å°†åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­å®šä½æ˜¾ç¤ºå‡ºé”™ä¿¡æ¯
yarn add terser-webpack-plugin -D               # è¿™ä¸ªæ’ä»¶ä½¿ç”¨ terser å‹ç¼© JavaScript
yarn add webpack-bundle-analyzer -D             # ä½¿ç”¨äº¤äº’å¼å¯ç¼©æ”¾æ ‘å½¢åœ°å›¾å¯è§†åŒ– webpack è¾“å‡ºæ–‡ä»¶çš„å¤§å°
yarn add compression-webpack-plugin -D          # é™æ€èµ„æºå‹ç¼©, ä½¿ç”¨Content-Encodingä¸ºå®ƒä»¬æä¾›æœåŠ¡
yarn add webpackbar -D                          # ä¼˜é›…çš„ Webpack è¿›åº¦æ¡å’Œåˆ†æå™¨
yarn add postcss-flexbugs-fixes -D              # ç”¨äºä¿®å¤ä¸€äº›å’Œ flex å¸ƒå±€ç›¸å…³çš„ bug
yarn add babel-loader -D
```

### 3\. å®‰è£…æ ·å¼æ–‡ä»¶å¤„ç†

```bash
yarn add style-loader -D        # å°†ç»“æœä»¥styleæ ‡ç­¾çš„æ–¹å¼æ’å…¥DOMæ ‘ä¸­ã€‚style-loaderå°†css-loaderæ‰“åŒ…å¥½çš„ CSS ä»£ç ä»¥<style>æ ‡ç­¾çš„å½¢å¼æ’å…¥åˆ° HTML æ–‡ä»¶ä¸­
yarn add css-loader -D          # ä¸»è¦æ˜¯è§£æcssæ–‡ä»¶ä¸­çš„@importå’Œurlè¯­å¥ï¼Œå¤„ç†css-modulesï¼Œå¹¶å°†ç»“æœä½œä¸ºä¸€ä¸ªjsæ¨¡å—è¿”å›
yarn add less less-loader -D    # lessé¢„å¤„ç†å™¨å¤„ç†
yarn add postcss-loader -D      # è¿›ä¸€æ­¥å¤„ç†cssæ–‡ä»¶ï¼Œæ¯”å¦‚æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼Œå‹ç¼© CSS ç­‰
yarn add postcss-preset-env -D  # æœ€æ–°çš„ CSS è¯­æ³•è½¬æ¢ä¸ºç›®æ ‡ç¯å¢ƒçš„æµè§ˆå™¨èƒ½å¤Ÿç†è§£çš„ CSS è¯­æ³•ï¼Œç›®çš„æ˜¯ä½¿å¼€å‘è€…ä¸ç”¨è€ƒè™‘æµè§ˆå™¨å…¼å®¹é—®é¢˜ã€‚
yarn add autoprefixer  -D       # PostCSS å¤„ç†æµè§ˆå™¨å…¼å®¹é—®é¢˜
```

### 4\. æ·»åŠ  webpack é…ç½®æ–‡ä»¶

æ ¹ç›®å½•åˆ›å»º webpack æ–‡ä»¶ï¼Œæ·»åŠ  webpack.common.js ã€webpack.dev.js ä¸ webpack.prod.js ä¸‰ä¸ªé…ç½®æ–‡ä»¶ã€‚

```bash
webpack.common.js      # åŸºç¡€é…ç½®
webpack.dev.js         # å¼€å‘ç¯å¢ƒé…ç½®
webpack.prod.js        # ç”Ÿäº§ç¯å¢ƒé…ç½®
```

#### webpack.common.js é…ç½®

```js
const HtmlWebpackPlugin = require("html-webpack-plugin"); // ç®€åŒ– HTML æ–‡ä»¶åˆ›å»ºä»¥æœåŠ¡æ†ç»‘åŒ…çš„æ’ä»¶, å°†jsæ–‡ä»¶è‡ªåŠ¨å¼•è¿› html æ–‡ä»¶ä¸­
const MiniCssExtractPlugin = require("mini-css-extract-plugin"); // æŠ½ç¦»cssæ–‡ä»¶, è¿™ä¸ªæ’ä»¶å°†CSSå–åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚å®ƒä¸ºæ¯ä¸ªåŒ…å«CSSçš„JSæ–‡ä»¶åˆ›å»ºä¸€ä¸ªCSSæ–‡ä»¶ã€‚å®ƒæ”¯æŒæŒ‰éœ€åŠ è½½ CSS å’Œ SourceMapsã€‚
const WebpackBar = require("webpackbar"); // ä¼˜é›…çš„ Webpack è¿›åº¦æ¡å’Œåˆ†æå™¨
const ForkTsCheckerWebpackPlugin = require("fork-ts-checker-webpack-plugin"); // å¯åŠ¨æœ¬åœ°æœåŠ¡/æ‰“åŒ…é”™è¯¯æç¤º
const CopyPlugin = require("copy-webpack-plugin"); // å°†å·²å­˜åœ¨çš„å•ä¸ªæ–‡ä»¶æˆ–æ•´ä¸ªç›®å½•å¤åˆ¶åˆ°ç”Ÿæˆç›®å½•
const webpack = require("webpack");
const paths = require("../paths");
const { isDevelopment, isProduction } = require("../env");
const {
  imageInlineSizeLimit,
  imageBase64Path,
  shouldBase64FromFileEnd,
} = require("../conf");
const cssLoaders = (importLoaders) => [
  // æ‰§è¡Œé¡ºåºä»ååˆ°å‰ less-loader -> postcss-loader -> css-loader -> style-loader/MiniCssExtractPlugin.loader
  isDevelopment ? "style-loader" : MiniCssExtractPlugin.loader, // style-loaderçš„ä½œç”¨å°±æ˜¯å°†ç»“æœä»¥styleæ ‡ç­¾çš„æ–¹å¼æ’å…¥DOMæ ‘ä¸­ã€‚style-loaderå°†css-loaderæ‰“åŒ…å¥½çš„ CSS ä»£ç ä»¥<style>æ ‡ç­¾çš„å½¢å¼æ’å…¥åˆ° HTML æ–‡ä»¶ä¸­
  {
    loader: "css-loader", // ä¸»è¦æ˜¯è§£æcssæ–‡ä»¶ä¸­çš„@importå’Œurlè¯­å¥ï¼Œå¤„ç†css-modulesï¼Œå¹¶å°†ç»“æœä½œä¸ºä¸€ä¸ªjsæ¨¡å—è¿”å›
    options: {
      modules: false,
      sourceMap: isDevelopment, // å¼€å‘ç¯å¢ƒå¼€å¯
      importLoaders, // æ‰§è¡Œé¡ºåº: éœ€è¦å…ˆè¢« less-loader postcss-loader (æ‰€ä»¥è¿™é‡Œè®¾ç½®ä¸º 2)
    },
  },
  {
    loader: "postcss-loader", // è¿›ä¸€æ­¥å¤„ç†cssæ–‡ä»¶ï¼Œæ¯”å¦‚æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼Œå‹ç¼© CSS ç­‰
    options: {
      postcssOptions: {
        plugins: [
          require("postcss-flexbugs-fixes"), // ç”¨äºä¿®å¤ä¸€äº›å’Œ flex å¸ƒå±€ç›¸å…³çš„ bug
          isProduction && [
            "postcss-preset-env", // æœ€æ–°çš„ CSS è¯­æ³•è½¬æ¢ä¸ºç›®æ ‡ç¯å¢ƒçš„æµè§ˆå™¨èƒ½å¤Ÿç†è§£çš„ CSS è¯­æ³•ï¼Œç›®çš„æ˜¯ä½¿å¼€å‘è€…ä¸ç”¨è€ƒè™‘æµè§ˆå™¨å…¼å®¹é—®é¢˜ã€‚
            {
              // ä½¿ç”¨ autoprefixer æ¥è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å¤´
              autoprefixer: {
                grid: true,
                flexbox: "no-2009",
              },
              stage: 3,
            },
          ],
        ].filter(Boolean),
      },
    },
  },
];
const config = {
  entry: {
    app: paths.appIndex,
  },
  cache: {
    // ç¼“å­˜,cache.type è®¾ç½®ä¸º 'filesystem' æ˜¯ä¼šå¼€æ”¾æ›´å¤šçš„å¯é…ç½®é¡¹ã€‚
    // æ”¶é›†åœ¨ååºåˆ—åŒ–æœŸé—´åˆ†é…çš„æœªä½¿ç”¨çš„å†…å­˜ï¼Œ, ä»…å½“ cache.type è®¾ç½®ä¸º 'filesystem' æ—¶ç”Ÿæ•ˆã€‚è¿™éœ€è¦å°†æ•°æ®å¤åˆ¶åˆ°æ›´å°çš„ç¼“å†²åŒºä¸­ï¼Œå¹¶æœ‰æ€§èƒ½æˆæœ¬ã€‚
    type: "filesystem",
    buildDependencies: {
      // æ˜¯ä¸€ä¸ªé’ˆå¯¹æ„å»ºçš„é¢å¤–ä»£ç ä¾èµ–çš„æ•°ç»„å¯¹è±¡ã€‚webpack å°†ä½¿ç”¨è¿™äº›é¡¹å’Œæ‰€æœ‰ä¾èµ–é¡¹çš„å“ˆå¸Œå€¼æ¥ä½¿æ–‡ä»¶ç³»ç»Ÿç¼“å­˜å¤±æ•ˆã€‚
      config: [__filename],
    },
  },
  resolve: {
    extensions: [".tsx", ".ts", ".js", ".json"],
    alias: {
      "@": paths.appSrc,
      mock: paths.appMock,
      Components: paths.appSrcComponents,
      Utils: paths.appSrcUtils,
    },
  },
  module: {
    rules: [
      {
        test: /.(tsx?|js)$/,
        loader: "babel-loader", // ä½¿ç”¨ç¼“å­˜
        options: { cacheDirectory: true },
        exclude: [/node_modules/, /(.|_)min.js$/],
      },
      {
        test: /.css$/,
        use: cssLoaders(1),
      },
      {
        test: /.less$/,
        use: [
          ...cssLoaders(2),
          {
            loader: "less-loader",
            options: {
              sourceMap: isDevelopment,
            },
          },
        ],
      },
      {
        test: [/.bmp$/, /.gif$/, /.jpe?g$/, /.png$/],
        type: "asset",
        parser: {
          // å½“æä¾›å‡½æ•°æ—¶ï¼Œè¿”å› true å€¼æ—¶å‘ŠçŸ¥ webpack å°†æ¨¡å—ä½œä¸ºä¸€ä¸ª Base64 ç¼–ç çš„å­—ç¬¦ä¸²æ³¨å…¥åˆ°åŒ…ä¸­ï¼Œ
          // å¦åˆ™æ¨¡å—æ–‡ä»¶ä¼šè¢«ç”Ÿæˆåˆ°è¾“å‡ºçš„ç›®æ ‡ç›®å½•ä¸­ã€‚å°†base64çš„èµ„æºéƒ½æ”¾åœ¨ä¸€ä¸ªç›®å½•ä¸‹
          dataUrlCondition: (source, { filename }) => {
            // 1. å¦‚æœæ˜¯base64ä¸‹çš„ç›®å½•ï¼Œå°†æ–‡ä»¶æ‰“åŒ…æˆbase64
            if (filename.includes(imageBase64Path)) {
              return true;
            }
            // 2. å¦‚æœå¼€å¯äº†æ–‡ä»¶å°¾éƒ¨æ‰«æï¼Œåˆ™å½¢å¦‚ xxx.base64.xxxä¼šä»¥Base64 ç¼–ç çš„å­—ç¬¦ä¸²æ³¨å…¥åˆ°åŒ…ä¸­
            if (shouldBase64FromFileEnd && filename.includes(".base64")) {
              return true;
            }
            // 3. å¯¹äºå°äºimageInlineSizeLimitçš„æ–‡ä»¶ï¼Œä¼šä»¥Base64 ç¼–ç çš„å­—ç¬¦ä¸²æ³¨å…¥åˆ°åŒ…ä¸­
            if (source.length <= imageInlineSizeLimit) {
              return true;
            }
            return false;
          },
        },
      },
      {
        test: /.(eot|ttf|woff|woff2?)$/,
        exclude: paths.appSvg, // ä¸å¤„ç† svgç±»å‹æ–‡ä»¶
        type: "asset/resource",
      },
      {
        test: /.svg$/,
        loader: "svg-sprite-loader",
        include: paths.appSvg,
        options: {
          symbolId: "icon-[name]", // symbolIdå’Œuseä½¿ç”¨çš„åç§°å¯¹åº” <use xlinkHref={"#icon-" + svgName} />
        },
      },
    ],
  },
  plugins: [
    new webpack.DefinePlugin(paths.appDefineVariable),
    new HtmlWebpackPlugin({
      template: paths.appHtml,
      cache: true,
      env: process.env.ENV || "",
    }),
    new CopyPlugin({
      patterns: [
        {
          context: paths.appPublic,
          from: "*",
          to: paths.appBuild,
          toType: "dir",
          globOptions: {
            dot: true,
            gitignore: true,
            ignore: ["**/index.html"],
          },
        },
      ],
    }),
    new WebpackBar({
      name: isDevelopment ? "RUNNING" : "BUNDLING",
      color: isDevelopment ? "#52c41a" : "#722ed1",
    }),
    new ForkTsCheckerWebpackPlugin({
      typescript: {
        configFile: paths.appTsConfig,
      },
    }),
  ],
};
module.exports = config;
```

#### webpack.dev.js é…ç½®

```js
const Webpack = require("webpack");
const ErrorOverlayPlugin = require("error-overlay-webpack-plugin"); // è¿™ä¸ªæ’ä»¶å°†åœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­å®šä½æ˜¾ç¤ºå‡ºé”™ä¿¡æ¯
const { merge } = require("webpack-merge"); // Webpackåˆå¹¶å‡½æ•°
const commonConfig = require("./webpack.common.js");
const paths = require("../paths");
const devConfig = {
  mode: "development",
  devtool: "cheap-module-source-map",
  target: "web",
  output: {
    path: paths.appBuild,
    publicPath: "/",
    filename: "js/[name].js",
  },
  devServer: {
    host: "0.0.0.0",
    compress: true, // æ˜¯å¦å¯ç”¨ gzip å‹ç¼©
    stats: "errors-only", // ç»ˆç«¯ä»…æ‰“å° error
    clientLogLevel: "silent", // æ—¥å¿—ç­‰çº§
    open: true, // æ‰“å¼€é»˜è®¤æµè§ˆå™¨
    hot: true, // çƒ­æ›´æ–°
    noInfo: true,
    proxy: {
      ...require(paths.appProxySetup),
    },
    historyApiFallback: true, // å•é¡µé¢é…ç½®appProxySetup
  },
  plugins: [new Webpack.HotModuleReplacementPlugin(), new ErrorOverlayPlugin()],
  optimization: {
    minimize: false, //å…³é—­å‹ç¼©
    minimizer: [],
    splitChunks: {
      chunks: "all",
      minSize: 0,
    },
  },
};
module.exports = merge(commonConfig, devConfig);
```

#### webpack.prod.js é…ç½®

```js
const MiniCssExtractPlugin = require('mini-css-extract-plugin'); // æŠ½ç¦»cssæ–‡ä»¶, è¿™ä¸ªæ’ä»¶å°†CSSå–åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚å®ƒä¸ºæ¯ä¸ªåŒ…å«CSSçš„JSæ–‡ä»¶åˆ›å»ºä¸€ä¸ªCSSæ–‡ä»¶ã€‚å®ƒæ”¯æŒæŒ‰éœ€åŠ è½½ CSS å’Œ SourceMapsã€‚
const CssMinimizerPlugin = require('css-minimizer-webpack-plugin'); // è¿™ä¸ªæ’ä»¶ä¼˜åŒ–å’Œå‹ç¼©css
const TerserPlugin = require('terser-webpack-plugin'); // è¿™ä¸ªæ’ä»¶ä½¿ç”¨ terser æ¥ç¼©å°/æœ€å°åŒ–ä½ çš„ JavaScript
const {BundleAnalyzerPlugin} = require('webpack-bundle-analyzer'); // ä½¿ç”¨äº¤äº’å¼å¯ç¼©æ”¾æ ‘å½¢åœ°å›¾å¯è§†åŒ– webpack è¾“å‡ºæ–‡ä»¶çš„å¤§å°
const CompressionPlugin = require('compression-webpack-plugin'); // é™æ€èµ„æºå‹ç¼©, ä½¿ç”¨Content-Encodingä¸ºå®ƒä»¬æä¾›æœåŠ¡
const {merge} = require('webpack-merge');
const commonConfig = require('./webpack.common.js');
const paths = require('../paths');
const {shouldOpenAnalyzer, ANALYZER_HOST, ANALYZER_PORT} = require('../conf');
const prodConfig = {
    mode: 'production',
    target: 'browserslist',
    output: {
        path: paths.appBuild,
        filename: 'js/[name].[contenthash:8].js',
        assetModuleFilename: 'images/[name].[contenthash:8].[ext]',
        publicPath: process.env.PUBLIC_PATH,
        clean: true // åœ¨ç”Ÿæˆæ–‡ä»¶ä¹‹å‰æ¸…ç©º output ç›®å½•
    },
    plugins: [
        new MiniCssExtractPlugin({
            filename: 'css/[name].[contenthash:8].css',
            chunkFilename: 'css/[name].[contenthash:8].chunk.css',
            ignoreOrder: true
        }),
        new CompressionPlugin({
            test: /.js$|.html$|.\css/, // åŒ¹é…æ–‡ä»¶å
            threshold: 10240, // å¯¹è¶…è¿‡10kçš„æ•°æ®å‹ç¼©
            deleteOriginalAssets: false // ä¸åˆ é™¤æºæ–‡ä»¶
        }),
        shouldOpenAnalyzer &&
            new BundleAnalyzerPlugin({
                analyzerMode: 'server',
                analyzerHost: ANALYZER_HOST,
                analyzerPort: ANALYZER_PORT
            })
    ].filter(Boolean),
    optimization: {
        // å…è®¸ä½ é€šè¿‡æä¾›ä¸€ä¸ªæˆ–å¤šä¸ªå®šåˆ¶è¿‡çš„ TerserPlugin å®ä¾‹ï¼Œ è¦†ç›–é»˜è®¤å‹ç¼©å·¥å…·(minimizer)
        minimizer: [
            new TerserPlugin({
                extractComments: false, // åˆ é™¤æ³¨é‡Š
                terserOptions: {
                    compress: {pure_funcs: ['console.log', 'console.warn']}
                }
            }),
            new CssMinimizerPlugin()
        ],
        // å¯¹äºåŠ¨æ€å¯¼å…¥æ¨¡å—ï¼Œè¯·åœ¨ SplitChunksPlugin é¡µé¢ä¸­æŸ¥çœ‹é…ç½®å…¶è¡Œä¸ºçš„å¯ç”¨é€‰é¡¹ã€‚
        splitChunks: {
            automaticNameDelimiter: '-', // ç”Ÿæˆåç§°çš„åˆ†éš”ç¬¦
            chunks: 'all', // all-æ‰€æœ‰æ¨¡å—ç”Ÿæ•ˆï¼Œasync-æŠ½å–å¼‚æ­¥æ¨¡å—ï¼Œinitial:åŒæ­¥æ¨¡å—ç”Ÿæ•ˆ
            // minSize: 100000, //  todo, åç»­è¿˜æœ‰æ€§èƒ½é—®é¢˜å†æ‹†, ç”Ÿæˆ chunk çš„æœ€å°ä½“ç§¯ï¼ˆä»¥ bytes ä¸ºå•ä½ï¼‰ã€‚
            // maxSize: 40000, // todo, åç»­è¿˜æœ‰æ€§èƒ½é—®é¢˜å†æ‹†, ç”Ÿæˆ chunk çš„æœ€å¤§ä½“ç§¯ï¼ˆä»¥ bytes ä¸ºå•ä½ï¼‰ã€‚
            cacheGroups: {
                commons: {
                    test: /[/\]node_modules[/\]/,
                    name: 'vendors',
                    chunks: 'all'
                },
                // æŠ½ç¦»è‡ªå®šä¹‰å·¥å…·åº“
                utilCommon: {
                    name: 'common',
                    minSize: 0, // å°†å¼•ç”¨æ¨¡å—åˆ†ç¦»æˆæ–°ä»£ç æ–‡ä»¶çš„æœ€å°ä½“ç§¯
                    minChunks: 2, // è¡¨ç¤ºå°†å¼•ç”¨æ¨¡å—å¦‚ä¸åŒæ–‡ä»¶å¼•ç”¨äº†å¤šå°‘æ¬¡ï¼Œæ‰èƒ½åˆ†ç¦»ç”Ÿæˆæ–°chunk
                    priority: -20 // ä¼˜å…ˆçº§
                }
            }
        }
    }
};
module.exports = merge(commonConfig, prodConfig);
```

## â‘¢ React æ”¯æŒ

### 1\. React

#### å®˜æ–¹æ–‡æ¡£ï¼š[React](https://react.dev/reference/react)

React æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚

#### å®‰è£… react

```csharp
yarn add react react-dom
```

### 2\. Babel

#### å®˜æ–¹æ–‡æ¡£ï¼š[Babel](https://babeljs.io/docs/usage)

Babel æ˜¯ä¸€ä¸ªå·¥å…·é“¾ï¼Œä¸»è¦ç”¨äºå°† ECMAScript 2015+ ä»£ç è½¬æ¢ä¸ºå½“å‰å’Œæ—§ç‰ˆæµè§ˆå™¨æˆ–ç¯å¢ƒä¸­çš„å‘åå…¼å®¹ç‰ˆæœ¬çš„ JavaScriptã€‚Babel å¯ä»¥åœ¨æ„å»ºè¿‡ç¨‹ä¸­å°†æºä»£ç è½¬æ¢ä¸ºç›®æ ‡ä»£ç ï¼Œä¹Ÿå¯ä»¥åœ¨è¿è¡Œæ—¶å®æ—¶è½¬æ¢ä»£ç ã€‚ä»¥ä¸‹æ˜¯ Babel çš„ä¸€äº›è¯´æ˜ï¼š

- Babel å¯ä»¥è½¬è¯‘å¤šç§ JavaScript è¯­æ³•å’Œç‰¹æ€§ï¼ŒåŒ…æ‹¬ ES6/ES2015ã€ES7/ES2016ã€ES8/ES2017ã€ES9/ES2018 ç­‰ã€‚
- Babel çš„è½¬è¯‘è§„åˆ™æ˜¯å¯é…ç½®çš„ï¼Œå¯ä»¥ä½¿ç”¨é¢„è®¾é›†åˆæˆ–æ’ä»¶æ¥æŒ‡å®šè½¬è¯‘è§„åˆ™ã€‚
- Babel å¯ä»¥ä¸ Webpackã€Rollupã€Gulp ç­‰æ„å»ºå·¥å…·é›†æˆä½¿ç”¨ï¼Œä»¥ä¾¿åœ¨é¡¹ç›®æ„å»ºè¿‡ç¨‹ä¸­å¯¹ä»£ç è¿›è¡Œè½¬è¯‘ã€‚
- Babel å¯ä»¥å®æ—¶è½¬è¯‘ä»£ç ï¼Œä»¥ä¾¿åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨æœ€æ–°çš„ JavaScript ç‰¹æ€§ï¼Œè€Œæ— éœ€æ‹…å¿ƒå®ƒä»¬æ˜¯å¦å—åˆ°æµè§ˆå™¨æ”¯æŒçš„é™åˆ¶ã€‚
- Babel å¯ä»¥ä½¿ç”¨ polyfill æ¥æ¨¡æ‹Ÿæ–°ç‰¹æ€§ï¼Œä»¥ä¾¿åœ¨æ—§ç‰ˆæœ¬æµè§ˆå™¨æˆ–ç¯å¢ƒä¸­ä½¿ç”¨æ–°ç‰¹æ€§ã€‚
- Babel è¿˜æ”¯æŒ TypeScript è½¬è¯‘ï¼Œå¯ä»¥å°† TypeScript ä»£ç è½¬è¯‘ä¸º JavaScript ä»£ç ï¼Œä»¥ä¾¿åœ¨æµè§ˆå™¨æˆ– Node.js ç­‰ç¯å¢ƒä¸­è¿è¡Œã€‚

#### å®‰è£… babel åŠç›¸å…³é¢„è®¾

```bash
yarn add @babel/core  -D.                       # Babel çš„æ ¸å¿ƒåŠŸèƒ½
yarn add @babel/cli  -D                         # ä¸€ä¸ªèƒ½å¤Ÿä»ç»ˆç«¯ï¼ˆå‘½ä»¤è¡Œï¼‰ä½¿ç”¨çš„å·¥å…·
yarn add @babel/preset-env  -D.                 # æ ¹æ® browserslist ä¸­æµè§ˆå™¨è®¾å®šï¼Œè¿›è¡Œ polyfill
yarn add @babel/preset-react -D                 # é¢„è®¾é›†åˆ: è½¬è¯‘jsx
yarn add @babel/plugin-transform-runtime  -D    # æŒ‰éœ€è½¬æ¢api
yarn add @babel/runtime-corejs3 -D              # corejs: false åªå¯¹ESè¯­æ³•è¿›è¡Œäº†è½¬æ¢, corejsï¼š2 æ²™ç›’ç¯å¢ƒï¼Œä¸æ±¡æŸ“å…¨å±€ç©ºé—´, æ— æ³•å®ä¾‹æ–¹æ³•, corejs: 3 æ²™ç›’ç¯å¢ƒï¼Œä¸æ±¡æŸ“å…¨å±€ç©ºé—´, å¯ä»¥å®ä¾‹æ–¹æ³•
```

#### babelrc é…ç½®

æ ¹ç›®å½•åˆ›å»º [.babelrc.js](https://github.com/guokaigdg/react-enterprise-template/blob/main/.babelrc.js)

```js
module.exports = {
  // é¢„è®¾é›†åˆ (presets) æ‰§è¡Œé¡ºåº: ä»åå¾€å‰ã€‚
  presets: [
    [
      "@babel/preset-env", // æ ¹æ® browserslist ä¸­æµè§ˆå™¨è®¾å®šï¼Œè¿›è¡Œ polyfill
      {
        /**
         * useBuiltInsåŠŸèƒ½è¯´æ˜: '@babel/preset-env'å¦‚ä½•è¿›è¡Œ polyfills
         * useBuiltInsé…ç½®è¯´æ˜å¦‚ä¸‹:
         * false: åªåšäº†è¯­æ³•è½¬æ¢
         * entry: å¼•å…¥äº†æ‰€æœ‰çš„esæ‰©å±•åŒ… (ä¸ç”¨çš„ä¹Ÿä¼šæ‰“åŒ…è¿›æ¥)
         * usage: è‡ªåŠ¨æ£€æµ‹ä»£ç ä¸­ç”¨åˆ°çš„åŠŸèƒ½è‡ªåŠ¨å¼•å…¥æ¨¡å—
         */
        useBuiltIns: "usage",
        corejs: 3,
      },
    ],
    "@babel/preset-react",
    "@babel/preset-typescript",
  ],
  // æ’ä»¶é›†åˆ (plugins) æ‰§è¡Œé¡ºåº: ä»å‰å¾€åã€‚
  plugins: [
    [
      "@babel/plugin-transform-runtime",
      {
        absoluteRuntime: false,
        /**
         * corejsé…ç½®è¯´æ˜å¦‚ä¸‹:
         * corejs: false åªå¯¹ESè¯­æ³•è¿›è¡Œäº†è½¬æ¢
         * corejsï¼š2 æ²™ç›’ç¯å¢ƒï¼Œä¸æ±¡æŸ“å…¨å±€ç©ºé—´, æ— æ³•å®ä¾‹æ–¹æ³•
         * corejs: 3 æ²™ç›’ç¯å¢ƒï¼Œä¸æ±¡æŸ“å…¨å±€ç©ºé—´, å¯ä»¥å®ä¾‹æ–¹æ³•
         */
        corejs: 3,
        helpers: true,
        regenerator: true,
        useESModules: false,
      },
    ],
  ],
};
```

## â‘£ TypeScript æ”¯æŒ

#### å®˜æ–¹æ–‡æ¡£ï¼š[TypeScript](https://www.typescriptlang.org/docs/)

#### å®‰è£… typescript

```csharp
yarn add @types/react @types/react-dom -D    // å®‰è£…ç±»å‹æ ¡éªŒ
yarn add typescript -D                       // æ·»åŠ  TypeScript
```

#### ts ç¼–è¯‘ä¸º js

Babel æ”¯æŒ TypeScript è½¬è¯‘ï¼Œå¯ä»¥å°† TypeScript ä»£ç è½¬è¯‘ä¸º JavaScript ä»£ç ï¼Œä»¥ä¾¿åœ¨æµè§ˆå™¨æˆ– Node.js ç­‰ç¯å¢ƒä¸­è¿è¡Œã€‚

```bash
yarn add @babel/preset-typescript  -D         # é¢„è®¾é›†åˆ: ç¼–è¯‘ts
```

#### typescript é…ç½®

- node æä¾›äº† npx å‘½ä»¤ç›´æ¥é€šè¿‡ tsc --init å‘½ä»¤åˆ›å»º tsconfig.json

```csharp
npx tsc --init
```

æ ¹ç›®å½•åˆ›å»º [tsconfig.json](https://github.com/guokaigdg/react-enterprise-template/blob/main/tsconfig.json)

```js
// tsconfig.json é…ç½®å‚è€ƒ: https://lq782655835.github.io/blogs/project/ts-tsconfig.html
{
    "compilerOptions": {
        /* åŸºæœ¬é€‰é¡¹ */
        "module": "esnext",                     // æŒ‡å®šä½¿ç”¨æ¨¡å—: 'commonjs', 'amd', 'system', 'umd' or 'es2015'
        "target": "esnext",                     // æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017', or 'ESNEXT'ï¼ˆ"ESNext"è¡¨ç¤ºæœ€æ–°çš„ESè¯­æ³•ï¼ŒåŒ…æ‹¬è¿˜å¤„åœ¨stage Xé˜¶æ®µï¼‰
        "noEmit": true,                         // ä¸è¾“å‡º, ä¸ç¼–è¯‘ä»£ç ï¼Œåªæ‰§è¡Œç±»å‹æ£€æŸ¥, ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶
        "allowJs": true,                        // å…è®¸ç¼–è¯‘ JavaScript æ–‡ä»¶
        "jsx": "react",                         // æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: 'preserve', 'react-native', or 'react'
        "isolatedModules": true,                // å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å— ï¼ˆä¸ 'ts.transpileModule' ç±»ä¼¼ï¼‰
        "lib": [                                // æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶
            "esnext",
            "dom"
        ],
        /* ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹ */
        "strict": true,                         // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹
        /* æ¨¡å—è§£æé€‰é¡¹ */
        "baseUrl": "./",                        // ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•
        "skipLibCheck": true,                   // è·³è¿‡æ‰€æœ‰å£°æ˜æ–‡ä»¶çš„ç±»å‹æ£€æŸ¥
        "allowSyntheticDefaultImports": true,   // å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥
        "esModuleInterop": true,                // å‘å‡ºé¢å¤–çš„JavaScriptä»¥ç®€åŒ–å¯¹å¯¼å…¥CommonJSæ¨¡å—çš„æ”¯æŒ
        "moduleResolution": "node",             // é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š 'node' (Node.js) or 'classic' (TypeScript pre-1.6)ã€‚é»˜è®¤æ˜¯classic
        "resolveJsonModule": true,              // å…è®¸ä½¿ç”¨ .json æ‰©å±•åå¯¼å…¥çš„æ¨¡å—
        "paths": {                              // æ¨¡å—ååˆ°åŸºäº baseUrl çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨
            "@/*": ["src/*"],
            "Components/*": ["src/components/*"],
            "Utils/*": ["src/utils/*"]
        },
        /* é¢å¤–çš„æ£€æŸ¥ */
        "noUnusedLocals": true,                 // æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯
        "noUnusedParameters": true,             // æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯
        "noFallthroughCasesInSwitch": true,     // æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰
        /* å…¶ä»–é€‰é¡¹ */
        "experimentalDecorators": true,         // æ˜¯å¦å¯ç”¨å®éªŒæ€§çš„ESè£…é¥°å™¨
    },
    "include": [
        "src",
        "*.ts"
    ],
    "exclude": ["node_modules", "build"]
}
```

## â‘¤ ä»£ç è§„èŒƒ

### 1\. ä»£ç é£æ ¼è§„èŒƒï¼ˆ js / ts ï¼‰

#### EditorConfig

##### å®˜æ–¹æ–‡æ¡£ï¼š [EditorConfig](https://editorconfig.org/)

EditorConfig å¸®åŠ©å¤šä¸ªå¼€å‘äººå‘˜åœ¨ä¸åŒçš„ç¼–è¾‘å™¨å’Œé›†æˆå¼€å‘ç¯å¢ƒä¸Šç»´æŠ¤ä¸€è‡´çš„ç¼–ç é£æ ¼ã€‚EditorConfig é¡¹ç›®ç”±ä¸€ä¸ªæ–‡ä»¶æ ¼å¼å’Œä¸€ç³»åˆ—æ–‡æœ¬ç¼–è¾‘å™¨æ’ä»¶ç»„æˆï¼Œå®ƒä»¬ä½¿ç¼–è¾‘å™¨èƒ½å¤Ÿè¯»å–æ–‡ä»¶æ ¼å¼å¹¶éµå¾ªå®šä¹‰çš„é£æ ¼ã€‚EditorConfig æ–‡ä»¶æ˜“äºé˜…è¯»ï¼Œå¹¶ä¸”ä¸ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå…¼å®¹ã€‚

##### å®‰è£… EditorConfigï¼ˆvscodeï¼‰

![Xnip2023-04-04_15-49-29.jpg](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ac08c0c3771346d3ad952f9cca59994f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

ä»¥ vscode å¹³å°ä¸ºä¾‹ï¼Œå®‰è£… EditorConfig For vs Code æ’ä»¶å³å¯ï¼Œå¦‚å›¾ã€‚å…¶ä»–å¹³å°å®‰è£…æ–¹å¼å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚

##### EditorConfig é…ç½®

æ ¹ç›®å½•åˆ›å»º [.editorconfig](https://github.com/guokaigdg/react-enterprise-template/blob/main/.editorconfig)

```ini
root = true
[*]
indent_style = space
indent_size = 2
charset = utf-8
trim_trailing_whitespace = true
insert_final_newline = true
end_of_line = lf
[*.md]
trim_trailing_whitespace = false
```

#### Prettier

##### å®˜æ–¹æ–‡æ¡£ï¼š[Prettier](https://link.juejin.cn/?target=https%3A%2F%2Fprettier.io%2Fdocs%2Fen%2Finstall.html "https://prettier.io/docs/en/install.html")

Prettier æ˜¯ä¸€æ¬¾éå¸¸æµè¡Œçš„ä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œå®ƒå¯ä»¥æ ¹æ®é¢„å®šä¹‰çš„è§„åˆ™è‡ªåŠ¨è°ƒæ•´ä»£ç çš„æ ¼å¼ä»¥è¾¾åˆ°ç»Ÿä¸€çš„ç¼–ç é£æ ¼ã€‚

##### å®‰è£… Prettier - Code formatterï¼ˆvscodeï¼‰

![Xnip2023-04-12_11-31-04.jpg](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f7f6ff24525a45df809d500e2b514ae3~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

##### å®‰è£… Prettier

```sh
npm install prettier -D
```

##### Prettier é…ç½®

å®˜æ–¹é…ç½®æ–‡æ¡£ï¼š [prettier.io/docs/en/optâ€¦](https://prettier.io/docs/en/options.html)

- printWidthï¼šæŒ‡å®šæ¯è¡Œçš„æœ€å¤§é•¿åº¦ã€‚é»˜è®¤ä¸º 80ã€‚
- tabWidthï¼šæŒ‡å®šä¸€ä¸ªåˆ¶è¡¨ç¬¦åº”è¯¥æœ‰å¤šå°‘ä¸ªç©ºæ ¼ã€‚é»˜è®¤ä¸º 2ã€‚
- useTabsï¼šæŒ‡å®šæ˜¯å¦åº”è¯¥ä½¿ç”¨åˆ¶è¡¨ç¬¦è€Œä¸æ˜¯ç©ºæ ¼ç¼©è¿›ã€‚é»˜è®¤ä¸º falseã€‚
- semiï¼šæŒ‡å®šæ˜¯å¦åº”è¯¥åœ¨è¯­å¥æœ«å°¾æ·»åŠ åˆ†å·ã€‚é»˜è®¤ä¸º trueã€‚
- singleQuoteï¼šæŒ‡å®šæ˜¯å¦åº”è¯¥ä½¿ç”¨å•å¼•å·è€Œä¸æ˜¯åŒå¼•å·ã€‚é»˜è®¤ä¸º falseã€‚
- quotePropsï¼šæŒ‡å®šæ˜¯å¦åº”è¯¥ä¸ºå¯¹è±¡ä¸­çš„å±æ€§æ·»åŠ å¼•å·ã€‚é»˜è®¤ä¸º "as-needed"ï¼Œå³åªåœ¨å¿…è¦æ—¶æ·»åŠ å¼•å·ã€‚
- jsxSingleQuoteï¼šæŒ‡å®šåœ¨ JSX ä¸­æ˜¯å¦åº”è¯¥ä½¿ç”¨å•å¼•å·è€Œä¸æ˜¯åŒå¼•å·ã€‚é»˜è®¤ä¸º falseã€‚
- trailingCommaï¼šæŒ‡å®šæ˜¯å¦åº”è¯¥åœ¨å¤šè¡Œå¯¹è±¡å’Œæ•°ç»„çš„æœ€åä¸€é¡¹åæ·»åŠ é€—å·ã€‚é»˜è®¤ä¸º "none"ã€‚
- bracketSpacingï¼šæŒ‡å®šæ˜¯å¦åº”è¯¥åœ¨å¯¹è±¡å­—é¢é‡ä¸­çš„æ‹¬å·å†…æ·»åŠ ç©ºæ ¼ã€‚é»˜è®¤ä¸º trueã€‚
- arrowParensï¼šæŒ‡å®šåœ¨ç®­å¤´å‡½æ•°ä¸­æ˜¯å¦åº”è¯¥æ·»åŠ æ‹¬å·ã€‚é»˜è®¤ä¸º "always"ã€‚

æ ¹ç›®å½•åˆ›å»º [.prettierrc](https://github.com/guokaigdg/react-enterprise-template/blob/main/.prettierrc)

```json
{
  "trailingComma": "all",
  "tabWidth": 4,
  "semi": false,
  "singleQuote": true,
  "endOfLine": "lf",
  "printWidth": 120,
  "bracketSpacing": true,
  "arrowParens": "always"
}
```

### 2\. ä»£ç è´¨é‡è§„èŒƒï¼ˆ js / ts ï¼‰

#### ESLint

##### å®˜æ–¹æ–‡æ¡£ï¼š[ESlint](https://eslint.org/docs/latest/use/getting-started)

ESLint æ˜¯ä¸€ä¸ªå¼€æºçš„ JavaScript ä»£ç æ£€æŸ¥å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…æ£€æŸ¥ JavaScript ä»£ç ä¸­çš„é”™è¯¯ï¼Œæ”¹è¿›ä»£ç è´¨é‡ï¼Œå¹¶éµå®ˆ ESLint è§„åˆ™ã€‚ESLint å¯ä»¥åœ¨ JavaScript é¡¹ç›®ä¸­è‡ªåŠ¨è¿è¡Œï¼Œä¹Ÿå¯ä»¥é›†æˆåˆ° IDE ä¸­ã€‚ESLint çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ä»£ç æ ¼å¼åŒ–ã€ä»£ç æç¤ºã€é”™è¯¯æç¤ºã€æ€§èƒ½åˆ†æç­‰ã€‚

##### å®‰è£… ESlint ï¼ˆvscdoeï¼‰

![Xnip2023-04-12_14-10-56.jpg](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cc81486f66b140ab835416518a9b87d5~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

##### å®‰è£… eslint

```csharp
yarn add eslint -D
```

```csharp
npx eslint --init
```

##### ESLint é…ç½®

æ ¹ç›®å½•åˆ›å»º [.eslintrc.js](https://github.com/guokaigdg/react-enterprise-template/blob/main/.eslintrc.js)

```js
const OFF = 0; // "off" æˆ– 0 - å…³é—­è§„åˆ™
const WARN = 1; // "warn" æˆ– 1 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨è­¦å‘Šçº§åˆ«çš„é”™è¯¯ï¼šwarn (ä¸ä¼šå¯¼è‡´ç¨‹åºé€€å‡º)
const ERROR = 2; // "error" æˆ– 2 - å¼€å¯è§„åˆ™ï¼Œä½¿ç”¨é”™è¯¯çº§åˆ«çš„é”™è¯¯ï¼šerror (å½“è¢«è§¦å‘çš„æ—¶å€™ï¼Œç¨‹åºä¼šé€€å‡º)
module.exports = {
  // æä¾›è¿è¡Œç¯å¢ƒï¼Œä¸€ä¸ªç¯å¢ƒå®šä¹‰äº†ä¸€ç»„é¢„å®šä¹‰çš„å…¨å±€å˜é‡
  env: {
    browser: true,
    es2021: true,
    node: true,
  },
  // é…ç½®æ–‡ä»¶å¯ä»¥è¢«åŸºç¡€é…ç½®ä¸­çš„å·²å¯ç”¨çš„è§„åˆ™ç»§æ‰¿ã€‚
  extends: [
    "eslint:recommended", // ä½¿ç”¨eslintä¸­recommenedçš„è§„åˆ™
    "plugin:react/recommended", // æ¨èçš„react linté…ç½®
    "plugin:@typescript-eslint/recommended", // å¯å¼€å¯é’ˆå¯¹ ts è¯­æ³•æ¨èçš„è§„åˆ™å®šä¹‰, éœ€é¢å¤–æ‰‹åŠ¨å®‰è£… @typescript-eslint/eslint-plugin
    "plugin:react-hooks/recommended", // react hookå½“ä¾èµ–é¡¹æŒ‡å®šä¸æ­£ç¡®æ—¶ï¼Œä¼šå‘å‡ºè­¦å‘Šå¹¶å»ºè®®ä¿®å¤ã€‚
  ],
  overrides: [],
  // ESLint é»˜è®¤ä½¿ç”¨Espreeä½œä¸ºå…¶è§£æå™¨ï¼Œä½ å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šä¸€ä¸ªä¸åŒçš„è§£æå™¨
  parser: "@typescript-eslint/parser", // éœ€æ‰‹åŠ¨å®‰è£… @typescript-eslint/parserï¼Œè¿™ä½¿Eslintèƒ½å¤Ÿç†è§£TypeScriptè¯­æ³•
  // é…ç½®è§£æå™¨æ”¯æŒçš„è¯­æ³•
  parserOptions: {
    ecmaVersion: "latest",
    sourceType: "module",
  },
  settings: {
    "import/resolver": {
      node: {
        extensions: [".tsx", ".ts", ".js", ".json"],
      },
      typescript: {},
    },
  },
  // ESLint æ”¯æŒä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ã€‚åœ¨ä½¿ç”¨æ’ä»¶ä¹‹å‰ï¼Œä½ å¿…é¡»ä½¿ç”¨ npm å®‰è£…å®ƒã€‚
  // åœ¨é…ç½®æ–‡ä»¶é‡Œé…ç½®æ’ä»¶æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ plugins å…³é”®å­—æ¥å­˜æ”¾æ’ä»¶åå­—çš„åˆ—è¡¨ã€‚æ’ä»¶åç§°å¯ä»¥çœç•¥ eslint-plugin- å‰ç¼€ã€‚
  plugins: ["react", "@typescript-eslint", "react-hooks"],
  // ESLint é™„å¸¦æœ‰å¤§é‡çš„è§„åˆ™ã€‚ä½ å¯ä»¥ä½¿ç”¨æ³¨é‡Šæˆ–é…ç½®æ–‡ä»¶ä¿®æ”¹ä½ é¡¹ç›®ä¸­è¦ä½¿ç”¨çš„è§„åˆ™ã€‚è¦æ”¹å˜ä¸€ä¸ªè§„åˆ™è®¾ç½®ï¼Œä½ å¿…é¡»å°†è§„åˆ™ ID è®¾ç½®ä¸ºä¸‹åˆ—å€¼ä¹‹ä¸€ï¼š
  rules: {
    "import/extensions": [
      OFF,
      "ignorePackages",
      {
        ts: "never",
        tsx: "never",
        js: "never",
      },
    ],
    "@typescript-eslint/no-var-requires": OFF, // å¿½ç•¥æ²¡æœ‰å¯¼å…¥å£°æ˜æ¨¡å—
    "react-hooks/rules-of-hooks": ERROR, // æ£€æŸ¥ Hook çš„è§„åˆ™
    "react-hooks/exhaustive-deps": WARN, // æ£€æŸ¥ Effect çš„ä¾èµ–
  },
};
```

### 3\. æ ·å¼ä»£ç è§„èŒƒï¼ˆ css ï¼‰

#### Stylelint

##### å®˜æ–¹æ–‡æ¡£ï¼š[stylelint](https://stylelint.io/user-guide/get-started)

stylelint æ˜¯ä¸€ä¸ªåŸºäºè§„åˆ™çš„ CSS æ ¡éªŒå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…æ£€æŸ¥å’Œä¿®å¤ CSS ä»£ç ä¸­çš„é”™è¯¯ã€è­¦å‘Šå’Œé£æ ¼é—®é¢˜ã€‚ä¸ ESLint ç±»ä¼¼ï¼Œstylelint å¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶å’Œæ’ä»¶è¿›è¡Œå®šåˆ¶ï¼Œä»¥æ»¡è¶³ä¸åŒé¡¹ç›®å’Œå›¢é˜Ÿçš„éœ€æ±‚ã€‚

##### å®‰è£… Stylelintï¼ˆvscodeï¼‰

![Xnip2023-04-12_14-08-24.jpg](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9f99ff72c8ec40a7a3bb40046026946c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

##### å®‰è£… stylelint ä¸ç›¸å…³æ’ä»¶

```bash
npm install stylelint -D                        # stylelintåŸºç¡€åŒ…
npm install stylelint-config-standard -D        # stylelinté…ç½®æ ‡å‡†, å¦‚éœ€ä¿®æ”¹è¯·åœ¨rulesæ·»åŠ é…ç½®
npm install stylelint-config-prettier -D        # å…³é—­æ‰€æœ‰ä¸å¿…è¦çš„æˆ–è€…å¯èƒ½ä¸prettierç›¸å†²çªçš„è§„åˆ™ã€‚(æ”¾åˆ°åé¢)
npm install stylelint-config-rational-order -D  # å°†ç›¸å…³å±æ€§å£°æ˜è¿›è¡Œæ’åº, æŒ‰ç…§(1.Positioning 2.Box Model 3.Typography 4.Visual 5.Animation 6.Misc)
npm install stylelint-declaration-block-no-ignored-properties -D   # æç¤ºæ ·å¼çŸ›ç›¾æƒ…å†µ, ç¦æ­¢ç”±äºåŒä¸€è§„åˆ™ä¸­çš„å¦ä¸€ä¸ªå±æ€§å€¼è€Œå¿½ç•¥çš„å±æ€§å€¼ã€‚
npm install stylelint-order -D                  # å¯ä»¥ç”¨æ¥å®šä¹‰æ ·å¼çš„é¡ºåº
```

##### stylelint é…ç½®

æ ¹ç›®å½•åˆ›å»º [.stylelintrc.js](https://github.com/guokaigdg/react-enterprise-template/blob/main/.stylelintrc.js)

```js
module.exports = {
  extends: [
    "stylelint-config-standard", // stylelinté…ç½®æ ‡å‡†, å¦‚éœ€ä¿®æ”¹è¯·åœ¨rulesæ·»åŠ é…ç½®
    "stylelint-config-rational-order", // å°†ç›¸å…³å±æ€§å£°æ˜è¿›è¡Œæ’åº, æŒ‰ç…§(1.Positioning 2.Box Model 3.Typography 4.Visual 5.Animation 6.Misc)
    "stylelint-config-prettier", // å…³é—­æ‰€æœ‰ä¸å¿…è¦çš„æˆ–è€…å¯èƒ½ä¸prettierç›¸å†²çªçš„è§„åˆ™ã€‚(æ”¾åˆ°åé¢)
  ],
  plugins: [
    "stylelint-order",
    "stylelint-declaration-block-no-ignored-properties", // æç¤ºæ ·å¼çŸ›ç›¾æƒ…å†µ, ç¦æ­¢ç”±äºåŒä¸€è§„åˆ™ä¸­çš„å¦ä¸€ä¸ªå±æ€§å€¼è€Œå¿½ç•¥çš„å±æ€§å€¼ã€‚
  ],
  // rules: å…¶ä¸­æ·»åŠ é‡å†™å’Œæ·»åŠ å†…å®¹ã€‚å¯ä»¥é€šè¿‡å°†è§„åˆ™çš„å€¼è®¾ç½®ä¸º null æ¥å…³é—­è§„åˆ™
  rules: {
    "plugin/declaration-block-no-ignored-properties": true,
    "comment-empty-line-before": null,
    "declaration-empty-line-before": null,
    "function-name-case": "lower",
    "no-descending-specificity": null,
    "no-invalid-double-slash-comments": null,
    "block-no-empty": null,
    "value-keyword-case": null,
    "rule-empty-line-before": [
      "always",
      { except: ["after-single-line-comment", "first-nested"] },
    ],
    "at-rule-no-unknown": null,
  },
  // å¿½ç•¥æ£€æµ‹æ–‡ä»¶
  ignoreFiles: [
    "node_modules/**/*",
    "build/**/*",
    "dist/**/*",
    "src/assets/font/*",
  ],
};
```

### 4\. ä»£ç æäº¤è§„èŒƒ

#### Husky

##### å®˜æ–¹æ–‡æ¡£ï¼š[husky](https://typicode.github.io/husky/#/?id=install)

husky æ˜¯ä¸€ä¸ªä»£ç æäº¤é’©å­ï¼Œå³åœ¨ä»£ç è¢«æäº¤åˆ° Git ä»“åº“ä¹‹å‰ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›é¢„æ£€æŸ¥æˆ–è€…æ ¼å¼åŒ–ï¼Œéœ€è¦åšè¿™äº›æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ª Git çš„æäº¤é’©å­ï¼Œç®€å•è¯´å°±æ˜¯ä½¿ç”¨ Git å‘½ä»¤ä¼šè§¦å‘çš„å‡½æ•°ã€‚

##### å®‰è£… husky

```sh
npm install husky -D
```

#### Lint-staged

##### å®˜æ–¹æ–‡æ¡£ï¼š[lint-staged](https://github.com/okonet/lint-staged#readme)

lint-staged æ˜¯ä¸€ä¸ªå‰ç«¯æ–‡ä»¶è¿‡æ»¤çš„å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªä»…ä»…è¿‡æ»¤å‡º Git ä»£ç æš‚å­˜åŒºæ–‡ä»¶ï¼ˆè¢« committed çš„æ–‡ä»¶ï¼‰çš„å·¥å…·ã€‚Lint-staged ä»…ä»…æ˜¯æ–‡ä»¶è¿‡æ»¤å™¨ï¼Œä¸ä¼šå¸®ä½ æ ¼å¼åŒ–ä»»ä½•ä¸œè¥¿ã€‚

##### å®‰è£… lint-staged

```sh
npm install lint-staged -D
```

##### husky && lint-staged é…ç½®

æ ¹ç›®å½• [package.json](https://github.com/guokaigdg/react-enterprise-template/blob/main/package.json) ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š

```js
"husky": {
    "hooks": {
        "pre-commit": "lint-staged",
        "commit-msg": "commitlint --config .commitlintrc.js -E HUSKY_GIT_PARAMS"
    }
},
"lint-staged": {
    "*.{ts,tsx,js}": [
        "eslint --config .eslintrc.js"
    ],
    "*.{css,less,scss}": [
        "stylelint --config .stylelintrc.js"
    ],
    "*.{ts,tsx,js,json,html,yml,css,less,scss,md}": [
        "prettier --write"
    ]
},
```

## â‘¥ ç¯å¢ƒåŒºåˆ†

### Env-cmd

#### å®˜æ–¹æ–‡æ¡£ï¼š[env-cmd](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Ftoddbluhm%2Fenv-cmd%23readme "https://github.com/toddbluhm/env-cmd#readme")

env-cmd æ˜¯ä¸€ä¸ªå‰ç«¯å¼€å‘ä¸­å¸¸ç”¨çš„å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜ç®¡ç†ç¯å¢ƒå˜é‡ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ä½¿ç”¨ä¸åŒçš„ç¯å¢ƒå˜é‡æ¥é€‚åº”ä¸åŒçš„åœºæ™¯ï¼Œä¾‹å¦‚æœ¬åœ°å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç­‰ã€‚

#### å®‰è£… env-cmd

```sh
npm install env-cmd -D
```

#### env-cmd é…ç½®

æ ¹ç›®å½•åˆ›å»º [.env.json](https://github.com/guokaigdg/react-enterprise-template/blob/main/.env.json)

```json
{
  "development": {
    "USER_BASE_URL": "/",
    "ENV": "dev"
  },
  "qa": {
    "USER_BASE_URL": "/",
    "ENV": "qa"
  },
  "production": {
    "USER_BASE_URL": "/",
    "ENV": "prod"
  }
}
```

#### env-cmd é¡¹ç›®å¯åŠ¨é…ç½®

æ ¹ç›®å½• [package.json](https://github.com/guokaigdg/react-enterprise-template/blob/main/package.json) ä¸­å¢åŠ ä»¥ä¸‹å†…å®¹ï¼š

```js
"scripts": {
    "dev": "npm run start",
    "start": "env-cmd -r .env.json -e development node webpack/server",
    "build:qa": "env-cmd -r .env.json -e qa webpack --config ./webpack/config/webpack.prod.js",
    "build:prod": "env-cmd -r .env.json -e production webpack --config ./webpack/config/webpack.prod.js"
},
```

å‘½ä»¤è¯´æ˜ï¼š

- `-r`: è‡ªå®šä¹‰ rc æ–‡ä»¶è·¯å¾„(é»˜è®¤è·¯å¾„: ./. env-cmdrc (| . js | . json)
- `-e`: ä½¿ç”¨çš„ rc æ–‡ä»¶ç¯å¢ƒç¯å¢ƒ`--environments`( `-e`) ã€‚

## â‘¦ è·¯ç”±ç®¡ç†

![Xnip2023-04-18_14-56-30.jpg](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c331507bea6848248d04f36ff1251add~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

### React Router

#### å®˜æ–¹æ–‡æ¡£ï¼š[react-router](https://reactrouter.com/en/main/start/tutorial)

React Router æ˜¯ä¸€ä¸ªè½»é‡çº§ã€åŠŸèƒ½é½å…¨çš„è·¯ç”±åº“ã€‚

#### å®‰è£… react-router-dom

```csharp
yarn add react-router-dom
```

#### router é…ç½®

æ ¹ç›®å½•åˆ›å»º [/src/router/**index.tsx**](https://github.com/guokaigdg/react-enterprise-template/blob/main/src/router/index.tsx)

```js
/*
 * react-router-dom v6 å®˜æ–¹æ–‡æ¡£
 * https://reactrouter.com/en/v6.3.0/getting-started/installation
 */
import React from "react";
import SuspenseLazy from "@/components/SuspenseLazy";
import { Navigate, RouteObject } from "react-router-dom";
const Home = SuspenseLazy(() =>
  import(/* webpackChunkName:"" */ "@/view/Home")
);
const HomeOne = SuspenseLazy(() =>
  import(/* webpackChunkName:"homeOne" */ "@/view/Home/HomeOne")
);
const HomeTwo = SuspenseLazy(() =>
  import(/* webpackChunkName:"homeTwo" */ "@/view/Home/HomeTwo")
);
const HomeThree = SuspenseLazy(() =>
  import(/* webpackChunkName:"HomeThree" */ "@/view/Home/HomeThree")
);
const Dashboard = SuspenseLazy(() =>
  import(/* webpackChunkName:"dashboard" */ "@/view/Dashboard")
);
const About = SuspenseLazy(() =>
  import(/* webpackChunkName:"about" */ "@/view/About")
);
const NotFound = SuspenseLazy(() =>
  import(/* webpackChunkName:"about" */ "@/view/NotFound")
);
const routes: RouteObject[] = [
  {
    path: "/",
    element: <Navigate to="home/two" />, // é‡å®šå‘
  },
  {
    path: "home",
    element: Home,
    children: [
      // åµŒå¥—è·¯ç”±
      {
        path: "one",
        element: HomeOne,
      },
      {
        path: "two",
        element: HomeTwo,
      },
      {
        path: "three",
        element: HomeThree,
      },
    ],
  },
  {
    path: "dashboard",
    element: Dashboard,
  },
  {
    path: "about",
    element: About,
  },
  // æœªåŒ¹é…åˆ°é¡µé¢
  {
    path: "*",
    element: NotFound,
  },
];
export default routes;
```

#### å…¶ä»–é¡µé¢é…ç½®

å‚è€ƒï¼šcommit âœ…[config: ğŸ”§ æ–°å¢è·¯ç”±ç®¡ç† react-router-dom v6](https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fguokaigdg%2Freact-enterprise-template%2Fcommit%2F239446d0709eb52bad2b48af4983eef91c49f60d "https://github.com/guokaigdg/react-enterprise-template/commit/239446d0709eb52bad2b48af4983eef91c49f60d")

## â‘§ çŠ¶æ€ç®¡ç†

### Mobx

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6b167432841c4ca3903681181ba30d6d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

#### å®˜æ–¹æ–‡æ¡£ï¼š[Mobx](https://mobx.js.org/README.html)

Mobx æ˜¯ä¸€ä¸ªçŠ¶æ€ç®¡ç†åº“ã€‚

#### å®‰è£… mobx

```sh
npm install mobx --save
```

### Mobx-react-lite

#### å®˜æ–¹æ–‡æ¡£ï¼š[mobx-react-lite](https://mobx.js.org/react-integration.html)

mobx-react-lite æ˜¯ä¸€ä¸ªç”¨äºå°† Mobx å’Œ React ç»“åˆä½¿ç”¨çš„è½»é‡çº§åº“ï¼Œ æ—¨åœ¨æä¾›æœ€ç®€å•çš„æ–¹å¼æ¥ä½¿ç”¨ Mobx æ¥ç®¡ç† React ç»„ä»¶çš„çŠ¶æ€ã€‚

ç›´è‡³ 2018 å¹´åº•ï¼ŒReact é¡¹ç›®ä¸­ç»Ÿä¸€ä½¿ç”¨ mobx çš„æ–¹å¼éƒ½æ˜¯ mobx-reactã€‚ç„¶è€Œéšç€ react hooks çš„è¯ç”Ÿï¼Œmobx-react-lite ä¹Ÿå‡ºç°äº†ï¼Œå®ƒæ˜¯ä¸“é—¨æœåŠ¡äº react hooks çš„ mobx-react è½»é‡çº§ç‰ˆæœ¬ã€‚è™½ç„¶ mobx-react@6 å·²ç»åŒ…å«äº† mobx-react-liteï¼Œä½†å®˜æ–¹æ˜¯æ¨èåœ¨æ²¡æœ‰ç±»ç»„ä»¶çš„ react é¡¹ç›®ä¸­ç›´æ¥ä½¿ç”¨ mobx-react-liteã€‚

```sh
npm install mobx-react --save
```

#### å…¶ä»–é¡µé¢é…ç½®

å‚è€ƒï¼šcommit âœ… [feat: âœ¨ æ–°å¢çŠ¶æ€ç®¡ç† Mobx v6](https://github.com/guokaigdg/react-enterprise-template/commit/992e1884943d4f8bda836f48c60df473418397d7)

## â‘¨ å¢åŠ  React Hook è§„åˆ™ ç›‘æŸ¥

- React Hook è§„åˆ™ âœ… [feat: âœ¨ æ–°å¢ react hooks è§„åˆ™æ£€æŸ¥](https://github.com/guokaigdg/react-enterprise-template/commit/15346c07a9ffd74f69dd1bb0dd6a4a42aa72df57)

## â‘© å¢åŠ  å°è£…å…¨å±€ SVG ç»„ä»¶

- å°è£…å…¨å±€ SVG ç»„ä»¶ âœ… [feat: âœ¨ å°è£…å…¨å±€ SVG ç»„ä»¶](https://github.com/guokaigdg/react-enterprise-template/commit/066fc6ff28c1ac3b0d6422ebda8d59cdf9275d3a)

å‚è€ƒè¿™ç¯‡æ–‡ç«  [ã€Š React é¡¹ç›®å¦‚ä½•å°è£… SVG ç»„ä»¶ ã€‹](https://juejin.cn/post/7207336474150273061)

> æœ¬æ–‡æ•´ç†ä»£ç å¦‚æœ‰ç¼ºå¤±è¯·å‚è€ƒ commit è®°å½•ï¼Œ æ¨èç›´æ¥å» github æŸ¥çœ‹æºç  **é¡¹ç›® repo**: [react-enterprise-template](https://github.com/guokaigdg/react-enterprise-template)
