---
title: "å¦‚ä½•å®ç°åŸç”Ÿ JS çš„æ‹–æ‹½æ•ˆæœ"
date: 2023-05-08T09:56:02+08:00
---

![å¦‚ä½•å®ç°åŸç”Ÿ JS çš„æ‹–æ‹½æ•ˆæœ](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebdd547f70e7427c84012bcd7db0d2c8~tplv-k3u1fbpfcp-zoom-crop-mark:1512:1512:1512:851.awebp?)

**å‰è¨€**: å…³äºâ€œæ‹–æ‹½â€ï¼Œå…¶å®æ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„éœ€æ±‚äº†ï¼Œå¹¶ä¸”è¿˜æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„é¢è¯•é¢˜ã€‚ä¹‹å‰åœ¨é¡¹ç›®ä¸­æ‹–æ‹½çš„åœºæ™¯éƒ½æ˜¯ç›´æ¥ä½¿ç”¨è½®å­ï¼Œè™½ç„¶å¾ˆå¿«å°±èƒ½å®Œæˆè®¾è®¡éœ€æ±‚ï¼Œä½†æ˜¯è¿™ä¸ªçš„åŸç†ä¸€ç›´éƒ½æ˜¯æˆ‘ååˆ†æƒ³å»æ·±å…¥äº†è§£çš„ä¸€éƒ¨åˆ†ã€‚

æ­£å¥½åœ¨ä»Šå¤©çš„é¡¹ç›®ä¸­å†ä¸€æ¬¡ç¢°åˆ°äº†è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘è§‰å¾—æ˜¯æ—¶å€™å»æ¢ç´¢ä¸€ä¸‹å®ƒäº†ã€‚

**tips**: æœ¬æ–‡ä¸ä¼šä½¿ç”¨ `Draggable` å»å®ç°ï¼Œè€Œæ˜¯ä¼šé‡‡ç”¨åŸç”Ÿçš„ **JS** **é¼ æ ‡ç§»åŠ¨**ï¼Œ**é¼ æ ‡ç‚¹å‡»**ç­‰äº‹ä»¶å»å®Œæˆã€‚å¹¶ä¸”ä½ éœ€è¦æ˜ç¡®çŸ¥é“çš„ä¸€ç‚¹æ˜¯ï¼š ğŸ**æœ¬æ–‡çš„æœ€ç»ˆç›®çš„å¹¶ä¸æ˜¯å®ç°ä¸€ä¸ªå¼€ç®±å³ç”¨çš„è½®å­ï¼Œè€Œæ˜¯è®©ä½ ç†è§£æ‹–æ‹½å®ç°çš„åŸç†ï¼ŒçŸ¥å…¶ç„¶å¹¶çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚** å¸Œæœ›ä½ å¯ä»¥æœ‰è€å¿ƒå’Œæˆ‘ä¸€èµ·å®Œæˆä¸‹é¢çš„åŠŸèƒ½ã€‚

æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹é¢„è§ˆæ•ˆæœï¼š

![å›¾ 4](https://cdn.jsdelivr.net/gh/hanzhenfang/vite-vue-ts@master/%E6%8B%96%E6%8B%BD/IMG_20230221-194439604.gif)

## ä¸€. å‰æœŸå‡†å¤‡

1. è¿™ä¸ªéœ€æ±‚å®ç°è¦å‡†å¤‡çš„æ–‡ä»¶å¾ˆå°‘ï¼Œä½ åªéœ€è¦åˆ›å»ºä¸€ä¸ª `.vue` æ–‡ä»¶å³å¯å¿«é€Ÿå¼€å§‹æ¥ä¸‹æ¥çš„å®ç°ï¼Œä½ å¯ä»¥è‡ªå·±åŠ¨æ‰‹å†™å‡ºä¸‹é¢çš„æ ·å¼ï¼Œä¹Ÿå¯ä»¥è·³åˆ°**æºç **æ ‡é¢˜å¤åˆ¶æˆ‘çš„æ ·å¼æ¥å¿«é€Ÿè¿›è¡Œä¸‹ä¸€æ­¥ã€‚
   ![å›¾ 6](https://cdn.jsdelivr.net/gh/hanzhenfang/vite-vue-ts@master/%E6%8B%96%E6%8B%BD/IMG_20230221-195639323.png)

2. æ ·å¼æ–¹é¢ï¼Œåœ¨è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ `UnoCSS` ï¼Œå°†æ ·å¼å…§è”åœ¨äº†æ ‡ç­¾é‡Œï¼Œå¦‚æœä½ è¿˜ä¸äº†è§£è¿™ç§å†™æ³•ï¼Œä½ å¯ä»¥ç‚¹å‡»ä¸‹æ–¹çš„æ–‡ç« å­¦ä¹ ã€‚ä¸è¿‡å³ä½¿ä½ ä¹‹å‰ä»æœªäº†è§£è¿‡ `UnoCSS` ï¼Œä¹Ÿä¸ä¼šå½±å“ä½ ä¸‹é¢çš„é˜…è¯»ï¼Œå› ä¸ºæ ·å¼ä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ï¼Œå¹¶ä¸å½±å“æ•´ä½“é˜…è¯»ã€‚
   [æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•åˆ›å»ºä¸€ä¸ªä»£ç ä»“åº“](https://juejin.cn/post/7178130338240020539)

3. åœ¨è¿™é‡Œæˆ‘ä»¬ç®€åŒ–ä¸€ä¸‹ï¼Œæˆ‘ä»¬æš‚æ—¶å»æ‰ä¸é‡è¦çš„ `hover` åŠ¨ç”»çš„å½±å“ï¼Œç›´æ¥åˆ‡å…¥ä¸»é¢˜ **â€œæ‹–æ‹½â€**ã€‚

4. **æ³¨æ„**ï¼šä¸ºäº†å‡å°‘å‡ºç°å¤§é‡çš„å±æ€§åå¯¼è‡´æœ¬æ–‡ç†è§£èµ·æ¥éš¾åº¦ä¼šæœ‰äº›è®¸æå‡çš„ç¼˜æ•…ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æš‚æ—¶ä¸ç‰µæ‰¯ **Y** è½´ä¸Šçš„æ‹–æ‹½æ•ˆæœã€‚ä½ ä¹Ÿä¸å¿…æ‹…å¿ƒï¼Œå› ä¸ºå®ƒå’Œ **X** è½´ä¸Šçš„ç§»åŠ¨åŸç†æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œè¿˜å¸Œæœ›è¯»è€…å­¦ä¹ ä¹‹åå¯ä»¥è‡ªè¡Œæ¨å¯¼å‡ºã€‚

## äºŒ. **click** å’Œ **mouseDown** å’Œ **mouseUp** çš„åŒºåˆ«

1. é¦–å…ˆç”¨æˆ·æƒ³è¦å®Œæˆ**æ‹–æ‹½**è¿™ä¸€æ“ä½œï¼Œå®ƒçš„åŠ¨ä½œé‡Œè‚¯å®šåŒ…å«äº†**é¼ æ ‡æŒ‰ä¸‹**çš„è¿™ä¸ªåŠ¨ä½œã€‚åœ¨è¿™é‡Œæ¯”è¾ƒå®¹æ˜“å’Œ **click** äº‹ä»¶ææ··ã€‚é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ **click** äº‹ä»¶æ˜¯åŒ…å«ä¸¤ä¸ªåŠ¨ä½œçš„ã€‚ä¸€ä¸ªæ˜¯ç”¨æˆ·**é¼ æ ‡æŒ‰ä¸‹**ï¼Œä¸€ä¸ªæ˜¯ç”¨æˆ·**é¼ æ ‡æŠ¬èµ·**ã€‚è¿™ä¸¤ä¸ªå…³é”®åŠ¨ä½œå¦‚æœåœ¨ä¸€èµ·åˆ™æ„æˆäº†æˆ‘ä»¬çš„ **click** äº‹ä»¶ã€‚
   ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d93157e1d5074585a82c8dc19dd6bfb0~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
2. åœ¨è¿™é‡Œæˆ‘ä»¬è¡¥å……ä¸€ä¸ªé¢å¤–çš„çŸ¥è¯†ã€‚æ³¨æ„ä¸Šé¢åˆ’çº¢çº¿çš„ä¸€å¥è¯ï¼š

   > â€œ`click`Â  äº‹ä»¶ä¼šåœ¨ Â [`mousedown`](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/mousedown_event)Â  å’Œ Â [`mouseup`](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/mouseup_event)Â  äº‹ä»¶ä¾æ¬¡è§¦å‘åè§¦å‘ã€‚â€

   å…¶å®ç†è§£èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯å½“ä½ åŒæ—¶ç»™ä¸€ä¸ªå…ƒç´ æ·»åŠ  `click` å’Œ `mouseDown` å’Œ `mouseup` çš„æ—¶å€™ã€‚è™½ç„¶çœ‹èµ·æ¥ `click` å¥½åƒæ˜¯ç”±å¦å¤–ä¸¤ä¸ªäº‹ä»¶ç»„æˆçš„ï¼Œä½†å…¶å®å®ƒä»¬ä¸‰ä¸ªæ˜¯ç›¸äº’ç‹¬ç«‹çš„äº‹ä»¶ã€‚å¹¶ä¸” `click` çš„ä¼˜å…ˆçº§ä¼šä½ä¸€ç‚¹ç‚¹ï¼Œä¼šåœ¨è¿™ä¸¤ä¸ªäº‹ä»¶æ‰§è¡Œå®Œæ¯•ä¹‹åå†å»æ‰§è¡Œã€‚

3. éªŒè¯ä¸€ä¸‹ï¼Œæˆ‘ä»¬ç›´æ¥å…ˆç»™æ»‘å—ä¸€ä¸ªç»‘å®šè¿™ä¸‰ä¸ªäº‹ä»¶ã€‚ ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3487ab8e72874670979bf9ed47644474~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   æˆ‘ä»¬çœ‹ä¸€ä¸‹æ§åˆ¶å°çš„è¾“å‡ºé¡ºåºï¼š  
   ![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cbac3362cc944a97a4df6ed9d59a3c88~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   è¯´æ˜æˆ‘ä»¬ä¸Šé¢çš„ç»“è®ºæ˜¯æ²¡é—®é¢˜çš„ã€‚

## ä¸‰. **clientX** æ˜¯ä»€ä¹ˆï¼Ÿ

1. ä¸è¿‡æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’æ˜¯ `onMousedown` è¿™ä¸ªäº‹ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬æš‚æ—¶å…ˆæŠŠå¦å¤–ä¸¤ä½è¯·ä¸‹å°ç¨ä½œä¼‘æ¯ã€‚  
   ![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/076a50c35b1445958bd39c435fd095a5~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
2. æˆ‘ä»¬ç‚¹å‡»ä¸€ä¸‹è¿™ä¸ªå…ƒç´ ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°å½“å‰ç‚¹å‡»ä¼ é€’è¿‡æ¥çš„äº‹ä»¶å¯¹è±¡èº«ä¸Šçš„ä¸€äº›å±æ€§ã€‚  
   ![å›¾ 8](https://cdn.jsdelivr.net/gh/hanzhenfang/vite-vue-ts@master/%E6%8B%96%E6%8B%BD/IMG_20230221-201447190.png)  
   å…¶å®æ‹–æ‹½çš„å…³é”®ç‚¹å°±åœ¨äºå¦‚ä½•åˆ©ç”¨è¿™äº›å±æ€§æ¥åŠ¨æ€æ”¹å˜æ»‘å—çš„ä½ç½®ã€‚
3. åœ¨è¿™é‡Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ `clientX` è¿™ä¸ªå±æ€§ã€‚è¿™é‡Œå¦‚æœå¤§å®¶å¯¹å…¶å®ƒå…³äº **X** çš„å±æ€§ä¸äº†è§£çš„è¯ï¼Œè¿˜å¸Œæœ›è‡ªè¡Œå»äº†è§£ä¸€ä¸‹ï¼Œä¸å±äºæœ¬æ–‡çš„èŒƒç•´ã€‚ä½ å¯ä»¥ç‚¹å‡»è¿™é‡Œå»äº†è§£å…¶å®ƒå±æ€§çš„å«ä¹‰ã€‚  
   [ä½ å¿…é¡»çŸ¥é“çš„å…³äºåæ ‡è½´çš„å±æ€§](https://juejin.cn/post/7204635326559158330)  
   åœ¨è¿™é‡Œæˆ‘ç®€å•ä»‹ç»ä¸€ä¸‹ `clientX` ä»£è¡¨çš„å«ä¹‰ã€‚  
   ![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/248e847e5042416383fcf65211598c5b~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   å‡è®¾æˆ‘åœ¨æ»‘å—é»„è‰²åœ†ç‚¹å¤„ç‚¹å‡»äº†ä¸€ä¸‹ï¼Œé‚£ä¹ˆä»**å¯è§†åŒºåŸŸ**çš„èŒƒå›´å†…çš„æœ€å·¦ä¾§å¼€å§‹åˆ°è¿™ä¸ª**é»„ç‚¹**çš„è·ç¦»å°±æ˜¯ **clientX**ã€‚  
   ä¸ºä»€ä¹ˆæˆ‘åœ¨è¿™é‡Œè¦å¼ºè°ƒ**å¯è§†åŒºåŸŸ**å‘¢ï¼Ÿæˆ‘åœ¨ä¸‹é¢çš„æ–‡ç« é‡Œå·²ç»åšå‡ºäº†éå¸¸è¯¦ç»†çš„ä»‹ç»ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ã€‚  
   \[ğŸ«± ä½ å¿…é¡»çŸ¥é“çš„ clientWidth, offsetWidth, scrollWidth\]([juejin.cn/post/719612â€¦](https://juejin.cn/post/7196128985612189752%EF%BC%89)
4. è¿™ä¸ªå±æ€§å¯¹æˆ‘ä»¬æ¥è¯´éå¸¸å…³é”®ï¼Œèªæ˜çš„ä½ å·²ç»çŒœåˆ°äº†ï¼Œå®ƒå…¶å®å°±ä»£è¡¨ç€æˆ‘ä»¬æ‹–æ‹½çš„èµ·ç‚¹åæ ‡ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦æŠŠå®ƒä¿å­˜åˆ°ä¸€ä¸ªå˜é‡é‡Œã€‚  
   ![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1ffda5e877d64282b4b8fb817654f7ee~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

## å››. onMouseMove å’Œ onMouseUp çš„ä½¿ç”¨

1. å’Œä¸Šé¢çš„ä»£ç å¤§åŒå°å¼‚ï¼Œè¿™é‡Œæˆ‘å°±ä¸è¿‡å¤šèµ˜è¿°ã€‚  
   ![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3115e4d9a3f347f79ae3909175c81ab2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
2. ç»‘å®šè¿™ä¸ªäº‹ä»¶ä¹‹åï¼Œæˆ‘ä»¬ä¼šå‘ç°å½“æˆ‘é¼ æ ‡åœ¨**æ»‘å—å†…ç§»åŠ¨**çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šæ‰§è¡Œã€‚  
   ![move.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b9ceb93b85064fefaea42d433914f5dc~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
3. ä½†æ˜¯è¿™ä¸ªæ•ˆæœå¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæˆ‘ä»¬æƒ³è¦çš„æ˜¯å½“æˆ‘ä»¬**é¼ æ ‡æŒ‰ä¸‹**çš„æ—¶å€™ä½ å¼€å§‹è®°å½•å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦è§¦å‘çš„è¿™ä¹ˆé¢‘ç¹ã€‚è¦è¾¾æˆä¹Ÿéå¸¸ç®€å•ï¼Œå¢åŠ ä¸€ä¸ªä¸­é—´å˜é‡ `isDown`ï¼Œæ¥è®°å½•è¿™ä¸ªçŠ¶æ€å³å¯ã€‚é‚£ä¹ˆéšä¹‹å°±éœ€è¦æ­é…æˆ‘ä»¬çš„ `onMouseDown` å’Œ `onMouseUp` æ¥å…±åŒç»´æŠ¤è¿™ä¸ªå˜é‡ã€‚  
   ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/db1377e08ba944bcb3bdc29dcadaa58f~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   æˆ‘æŠŠè¿™ä¸ªå˜é‡å€¼ç›´æ¥æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹ï¼š  
   ![move2.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d14fdc09656e4030956a199bf866d524~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   å¯ä»¥çœ‹åˆ°å·²ç»æš‚æ—¶è¾¾åˆ°æˆ‘ä»¬çš„éœ€æ±‚ã€‚
4. åˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬çš„å®ç°å…¶å®å­˜åœ¨ä¸€ä¸ª **bug**ã€‚å…·ä½“çœ‹ä¸‹é¢ï¼š  
   ![3.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0c74468802ec489a9ade98018a4076eb~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   ç»†å¿ƒçš„è¯»è€…å¯èƒ½å·²ç»å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘åœ¨**æ»‘å—å†…éƒ¨**æŒ‰ä¸‹é¼ æ ‡å **isDown** çš„å€¼å˜ä¸ºäº† `true`ï¼Œä½†æ˜¯å½“æˆ‘é¼ æ ‡åˆ’å‡º**æ»‘å—å†…éƒ¨**ç„¶å**æŠ¬èµ·**çš„æ—¶å€™ï¼Œ**mouseup** äº‹ä»¶å¹¶æ²¡æœ‰è¢«æ­£ç¡®çš„æ‰§è¡Œã€‚  
   ![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7d5439deaf71427c89b9b9a283084877~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
5. æœ€å¼€å§‹æˆ‘åœ¨è¿™é‡Œè¿·æƒ‘äº†å¾ˆä¹… ğŸ¤”ï¼Œå» **MDN** æŸ¥é˜…ç›¸å…³äº‹ä»¶çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰å‘ç°ä»»ä½•ç›¸å…³çš„è§£é‡Šã€‚  
   ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/31ab8b19d3814474b7245fa730c868db~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
6. ä½†æ˜¯æˆ‘çªç„¶æ³¨æ„åˆ°äº†ä¹‹å‰çœ‹åˆ° `Click` äº‹ä»¶ä¸Šçš„ä¸€æ®µè§£é‡Šã€‚  
   ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/15177154b9e94bfd8924be81a306bdbf~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
7. ç”±è¿™å¥è¯æˆ‘çŒœæƒ³æ˜¯å¦åº”è¯¥æŠŠè¿™ä¸ª `onMouseUp` ä¸Šç§»åˆ°æœ€å¤–å±‚çš„å…ƒç´ ä¸Šæ¥å‘¢ï¼ŸğŸ¤” è¯´å¹²å°±å¹²ã€‚  
   ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4e35a909316f4efe9cc5c9a795c8cb70~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   ç„¶åæˆ‘ä»¬éªŒè¯ä¸€ä¸‹ï¼š  
   ![3.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/76b33052c9434365a17bc3536ae4eced~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   å—¯ï½ç°åœ¨æˆ‘ä»¬çš„ä»£ç åº”è¯¥æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜äº†ï¼Œå¯ä»¥æ¥ç€è¿›è¡Œä¸‹ä¸€æ­¥äº†ã€‚
8. è¿™é‡Œæˆ–è®¸ä¼šæœ‰å°ä¼™ä¼´è¿·æƒ‘ï¼Œé‚£æˆ‘å¦‚æœä¸åœ¨**æ»‘å—å¤–é¢**æ¾å¼€äº†ï¼Œæˆ‘ä¾æ—§åœ¨**æ»‘å—å†…éƒ¨**æ¾å¼€å‘¢ï¼Ÿæˆ‘ä»¬å…ˆéªŒè¯ä¸€ä¸‹ï¼š  
   ![4.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/128c1ba18d364120bf5d4c9588459539~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   å¯ä»¥çœ‹å‡ºï¼Œæ˜¯ä¸æ¯«ä¸å½±å“æˆ‘ä»¬çš„æ•ˆæœçš„ã€‚  
   å¥‡æ€ª ğŸ¤”ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ
9. æˆ‘ä»¬é¦–å…ˆç»™**æ»‘å—**ä¸€ä¸ªä¸ä¸€æ ·çš„ `onMouseUp` äº‹ä»¶ã€‚ ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b6058a11662c4ed39db3a300b164280c~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   ![5.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/66abd8e315b54af8bc82470cb737fa06~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   ç»è¿‡ä¸Šé¢çš„å®éªŒï¼Œæˆ‘çŒœä½ å·²ç»å‘ç°äº†ï¼Œå…¶å®éå¸¸ç®€å•ï¼Œå°±æ˜¯å› ä¸º**äº‹ä»¶å†’æ³¡**çš„æœºåˆ¶ã€‚è™½ç„¶æˆ‘ä»¬åœ¨**æ»‘å—å†…éƒ¨**æ¾å¼€äº†é¼ æ ‡ï¼Œä½†æ˜¯ç”±äº**äº‹ä»¶å†’æ³¡**ï¼Œæœ€å¤–å±‚ **div** çš„ `onMouseUp` äº‹ä»¶ä¹Ÿè¢«è§¦å‘äº†ï¼Œæ‰€ä»¥æ­£ç¡®çš„è®¾ç½®äº† `isDown` çš„çŠ¶æ€ã€‚

## äº”. æ‹–æ‹½æ•ˆæœçš„åŸç†

1. è§£å†³äº†è¾¹ç•Œé—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å°±å¯ä»¥æ”¾å¿ƒåœ°å»å®Œæˆæ‹–æ‹½çš„æ•ˆæœäº†ï¼Œåˆ«ç€æ€¥å†™ä»£ç ã€‚é¦–å…ˆè®©æˆ‘ä»¬åˆ†æä¸€ä¸‹æ‹–æ‹½çš„åŸç†åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ
2. å‡è®¾æˆ‘åœ¨æ»‘å—å†…éƒ¨**é¼ æ ‡æŒ‰ä¸‹**åï¼Œæ‹–æ‹½äº†ä¸€æ®µè·ç¦»ç„¶å**æ¾å¼€äº†é¼ æ ‡**ã€‚æˆ‘ä»¬ç”¨ä¸‹å›¾çš„**èµ·ç‚¹**å’Œ**ç»ˆç‚¹**åˆ†åˆ«ä»£è¡¨è¿™ä¸¤ä¸ªäº‹ä»¶ã€‚  
   ![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7795ec6ea5484f248675ae86e5eb1f72~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
3. ç„¶åæˆ‘ä»¬ç»“åˆæˆ‘ä»¬ä¸Šé¢æåˆ°çš„å…³é”®å±æ€§ `clientX`ã€‚  
   ![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/94d627c80c154dceb34f6184007b7ec6~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬æ»‘å—**æ»‘åŠ¨çš„è·ç¦»**å…¶å®å°±æ˜¯ `clienX` çš„**å·®**å€¼ã€‚  
   ![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d6c1795c9f0645fd8b4a3f46e1d1f476~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
4. å…³é”®é—®é¢˜å°±æ¥äº†ï¼Œå¦‚ä½•å¾—å‡ºè¿™ä¸ª**å·®å€¼**ï¼Ÿå…¶å®éå¸¸éå¸¸ç®€å•ï¼Œæˆ‘ä»¬çš„ `onMouseMove` ä¼šè¢«ä¼ é€’çš„é‚£ä¸ªäº‹ä»¶å¯¹è±¡ä¸Šä¹Ÿå­˜åœ¨ä¸€ä¸ª `clientX`å±æ€§ï¼Œé‚£æˆ‘çš„èµ·ç‚¹åæ ‡ä¿¡æ¯æœ‰äº†ï¼Œè¿™ä¸¤è€…ç›¸å‰ªä¸å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœå—ï¼Ÿ  
   ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a9d2e40ff4c94325baf7af6c162f0d77~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   ![6.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/95b212537f52428693a1ff4246226492~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

## å…­. æ‹–æ‹½æ•ˆæœçš„å®ç°

1. ç§»åŠ¨çš„è·ç¦»æœ‰äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥å°±æ˜¯å¦‚ä½•å°†è¿™ä¸ªæ»‘å—åŠ¨èµ·æ¥äº†ï¼Œè¿™é‡Œæˆ‘æŸ¥é˜…äº†ä¸¤ç§æ–¹å¼ï¼Œæˆ‘ä»¬å…ˆä»‹ç»ç¬¬ä¸€ç§ã€‚ä¸»è¦æ€è·¯ä¸ºå°†æ»‘å—æ›´æ¢ä¸º `absolute` å¸ƒå±€ï¼Œç„¶åæ›´æ”¹ `left` å€¼æ¥å®Œæˆã€‚è¿™é‡Œæˆ‘ä»¬å…ˆç®€å•å®ç°ä¸€ä¸‹ï¼Œç„¶åå†è®²è§£å®ƒçš„å¼Šç«¯ã€‚
2. æˆ‘ä»¬å…ˆç»™**æ»‘å—**æ‰“ä¸Š **ref**ï¼Œå› ä¸ºä¹‹åæˆ‘ä»¬è¦å€ŸåŠ© **JS** å»æ“ä½œè¿™ä¸ªå…ƒç´ èŠ‚ç‚¹ã€‚  
   ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/23e05d6ff9a644dfa41fc3aa8c067f2d~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/88f81545c0e24f18adf70342b4dcaee3~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
3. æ€è·¯éå¸¸æ¸…æ™°ï¼Œå½“æˆ‘ä»¬**é¼ æ ‡æŒ‰ä¸‹**(**onMouseDown**)çš„æ—¶å€™ï¼Œè¦ç»™æ»‘å—è®¾ç½® `absolute`ã€‚ ![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6866466c86234ac5800e6af181f50da2~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
4. å½“**é¼ æ ‡ç§»åŠ¨**ï¼ˆ**onMouseMove**ï¼‰çš„æ—¶å€™ï¼Œå°†æ»‘å— `left` çš„å€¼ä¿®æ”¹ä¸º**å·®å€¼**ã€‚  
   ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/39d7d166f4ea4160b8f25635ebebfad0~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
5. å¯¹äº†ï¼Œåˆ«å¿˜äº†éœ€è¦ç»™æ»‘å—æ»‘åŠ¨èŒƒå›´çš„å¤–å£³ **div** è®¾ç½® **relative** å±æ€§ã€‚  
   ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/760f3e16b61b488b9db13013a3cd6185~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
6. åˆ°è¿™é‡Œæˆ‘ä»¬å…¶å®å°±å¯ä»¥çœ‹åˆ°ç®€å•çš„æ•ˆæœäº†ã€‚  
   ![5.gif](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fffe491cad964697848a5a55c1aee77a~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
7. ä½†æ˜¯ç›®å‰è¿˜ä¼šå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘åœ¨æ»‘åŠ¨çš„æ—¶å€™æ¾æ‰‹ï¼Œç„¶åé‡æ–°æ‹–æ‹½çš„æ—¶å€™ï¼Œæ»‘å—ä¼šä»å¤´å¼€å§‹ã€‚  
   ![7.gif](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/954ce278619545d29609bf8a527b88c4~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
8. é€ æˆè¿™ä¸ªæƒ…å†µçš„åŸå› ä¹Ÿå¾ˆç®€å•ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œå‡è®¾ä½ åœ¨ä¸­é—´æ¾æ‰‹ä¹‹åé‡æ–°æ‹–æ‹½äº† **10px** çš„è·ç¦»ã€‚![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/288da54cd5d44ffda08c08c1ee0e7206~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   é‚£ä¹ˆæ ¹æ®æˆ‘ä»¬ç°åœ¨çš„é€»è¾‘ï¼Œå…¶å®ä½ åˆšåˆšç§»åŠ¨äº† **1px** çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ä»£ç é©¬ä¸Šæ‰§è¡Œäº† `onMouseMove` å‡½æ•°ã€‚  
   ![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c7c9a37b41bf49ffb863ce47f6dff407~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   é‚£ä¹ˆå®ƒä¼šé©¬ä¸Šè®¾ç½®æˆ‘ä»¬æ»‘å—çš„ `left` ä¸º **1px**ï¼Œå°±é€ æˆäº†æ»‘å—é©¬ä¸Šå›åˆ°äº†èµ·ç‚¹çš„ç°è±¡ã€‚
9. è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå½“**é¼ æ ‡æŒ‰ä¸‹**çš„æ—¶å€™ï¼Œæ‹¿åˆ°èµ·å§‹çš„ **left** å€¼å³å¯ã€‚  
   ![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4d8e0aee70574b4486a64b0f3b769743~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   ç„¶åæˆ‘ä»¬åœ¨**é¼ æ ‡ç§»åŠ¨**çš„**å·®å€¼**ä¹‹å‰æ¯æ¬¡éƒ½åŠ ä¸Šåˆå§‹å€¼å°± ok äº†ã€‚  
   ![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/16e07fac4d2c4db0b4c4ce637b065c4e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   æˆ‘ä»¬çœ‹ä¸€ä¸‹æ•ˆæœï¼š  
   ![11.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1e6dab561b294e4f81f31ed05a496aa4~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

## ä¸ƒ. æ›´ä¼˜é›…çš„æ‹–æ‹½æ–¹æ¡ˆ

1. åœ¨ä¸Šé¢æˆ‘ä»¬ä½¿ç”¨åˆ°äº† `absolute` å®šä½ï¼Œå¹¶ä¸”é‡å¤ä¿®æ”¹ `left` çš„å€¼ã€‚å…¶å®è¿™æ ·çš„æ“ä½œæ˜¯ä¼šå¼•èµ·é¡µé¢çš„**é‡æ’**ã€‚åœ¨æ€§èƒ½æ–¹é¢ä¸Šçš„è€ƒè™‘æ¥è®²ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡å–æ­é… `tansform` æ¥å»æ“ä½œè¿™ä¸ªç§»åŠ¨çš„æ•ˆæœï¼Œå¯¹æ€§èƒ½æ–¹é¢è€ƒè™‘æ¥è®²æ˜¯æ›´ä¼˜çš„é€‰æ‹©ã€‚
2. å¹¶ä¸”å®ç°èµ·æ¥æ›´åŠ ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨**æ»‘å—ç§»åŠ¨**çš„æ—¶å€™ä¿®æ”¹ `tansform` å±æ€§çš„ `tanslateX` å³å¯ã€‚  
   ![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2641f459e4594567a7942d6ae05254d9~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   æ•ˆæœå¦‚ä¸‹ï¼š  
   ![12.gif](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41a03138caeb40ef9d17bab72103747b~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?) åªæ˜¯ç›®å‰è¿˜æ˜¯ä¼šå‡ºç°åœ¨ä¸­é—´æ¾æ‰‹ï¼Œç„¶åé‡æ–°æ‹–æ‹½ä¼šè¿”å›èµ·ç‚¹çš„æƒ…å†µï¼Œé€ æˆçš„åŸå› å’Œä¸Šé¢ `absolute` çš„æƒ…å†µä¸€æ ·ï¼Œéƒ½æ˜¯éœ€è¦åŠ ä¸Šåˆå§‹çš„å€¼ã€‚
3. ä½†æ˜¯è¿™é‡Œè·å–åˆå§‹å€¼çš„æ–¹æ³•ä¸å¤ªä¸€æ ·ã€‚ç”±äºæˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒå– `onMouseDown` çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„ `onMouseMove` äº‹ä»¶å…¶å®è¿˜æ²¡è§¦å‘ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ `transform` å±æ€§æœ‰å¯èƒ½ä¸º **å­—ç¬¦ä¸² String**æ ¼å¼çš„ **null**ã€‚å¹¶ä¸”è¿™é‡Œéœ€è¦ç‰¹åˆ«æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œæˆ‘ä»¬æ‹¿åˆ°çš„ `tansform` å±æ€§æ˜¯ä¸€ä¸ª **matrix** å‡½æ•°çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚å®ƒå¹¶ä¸æ˜¯æˆ‘ä»¬ç†æƒ³çŠ¶æ€ä¸‹çš„ `tansformX = 110 px` ç­‰è¿™æ ·ç°æˆå¯ä»¥ä½¿ç”¨çš„å€¼ã€‚  
   ![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/79447ce417af44f68ef5319bf8cc1f9e~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
4. è¿™é‡Œæˆ‘ä»¬å¦‚æœè¦æ˜¯ä½¿ç”¨çš„è¯çš„è¯ï¼Œéœ€è¦è‡ªå·±å»é€šè¿‡å­—ç¬¦ä¸²çš„ä¸€äº›æ–¹æ³•å»è‡ªè¡Œåˆ‡å‰²ã€‚ ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2fc4ffb23fad490e9cce6138cc0f2609~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   è€Œæˆ‘ä»¬æƒ³è¦çš„æ•°æ®å°±æ˜¯åˆ‡å‰²å¥½çš„æ•°ç»„ä¸­çš„ç¬¬äº”ä¸ªã€‚  
   ![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a05ede53f5c64d8691f300b2c21a1f9a~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)
5. é‚£ä¹ˆå¯¹åº”çš„ï¼Œåœ¨ `onMouseMove` å‡½æ•°ä¸­ç›´æ¥ä½¿ç”¨å³å¯ã€‚  
   ![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/84bd9894466d4789947fc7e713f51738~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)  
   è¿™æ˜¯é¡µé¢çš„æ•ˆæœï¼š  
   ![112.gif](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a6ef3b51480545beb202acf12aa33f41~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp?)

## ä¸ƒ. æºç 

```vue
<script setup lang="ts">
import { ref } from "vue";

const slider = ref<HTMLDivElement>();

const startPoint = ref<number>(0);
const isDown = ref<boolean>(false);

const premitiveX = ref<number>(0);

function onMouseDown(e: any) {
  isDown.value = true;
  const style = window.getComputedStyle(slider.value!);
  const { transform } = style;
  if (transform !== "none") {
    const matrixArr = transform.replace(/[^0-9\-,]/g, "").split(",");
    console.log("matrixArr", matrixArr);
    premitiveX.value = parseInt(matrixArr[4]);
  } else {
    premitiveX.value = 0;
  }
  const { clientX } = e;
  startPoint.value = clientX;
}

function onMosueUp(e: any) {
  isDown.value = false;
}

function onMouseMove(e: any) {
  if (!isDown.value) return;
  const { clientX } = e;
  const moveDistance = clientX - startPoint.value;
  const offset = premitiveX.value + moveDistance;
  console.log("offset", offset);
  slider.value!.style.transform = `translateX(${offset}px)`;
}
</script>

<template>
  <div @mouseup="onMosueUp" class="w-100vw h-100vh bg-blue flex items-center">
    <div class="w-500px h-200px bg-black flex ml-100px relative">
      <div
        ref="slider"
        @mousedown="onMouseDown"
        @mousemove="onMouseMove"
        class="w-100px h-full border-white border-4px"
      >
        <span class="text-50px">æ»‘å—</span>
      </div>
    </div>
  </div>
</template>
<style></style>
```

## æ€»ç»“

æœ€å¼€å§‹å†™è¿™ä¸ªè§£é”æ•ˆæœçš„æ—¶å€™ï¼Œå…¶å®ä¹ŸæŸ¥é˜…äº†å¾ˆå¤šæ•™ç¨‹ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯ç›´æ¥æ•™ä½ å¦‚ä½•ä½¿ç”¨ **H5** `draggble` è¿™ä¸ªæ ‡ç­¾å»å®ç°çš„ï¼Œä½†æ˜¯æˆ‘å°±åœ¨æƒ³ **H5** ä¹‹å‰äººä»¬æ˜¯å¦‚ä½•ä½¿ç”¨è¿™ä¸ªæ‹–æ‹½çš„å‘¢ï¼Ÿäºæ˜¯å°±è‡ªå·±å»æ€è€ƒå’ŒåŠ¨æ‰‹å°è¯•ï¼Œæœ€ç»ˆæ‰æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚

éšä¹‹å‡ å¤©æˆ‘ä¹Ÿä¼šé‡æ–°æ›´æ–°ä¸€ç¯‡ä½¿ç”¨ `draggable` å®ç°**æ‹–æ‹½**æ•ˆæœçš„æ–‡ç« ï¼Œè¿˜æ˜¯ä¼šç§‰æŒç€é€šä¿—æ˜“æ‡‚çš„è¯­è¨€æ¥å’Œä½ ä¸€èµ·å­¦ä¹ è¿™ä¸ªçŸ¥è¯†ç‚¹ã€‚**ä¸å›å…±å‹‰**æ‰æ˜¯æˆ‘å†™ä½œçš„çœŸæ­£ç›®çš„ã€‚
